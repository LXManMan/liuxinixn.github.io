<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="多去尝试你从未尝试的。">
<meta property="og:type" content="website">
<meta property="og:title" content="雪晟">
<meta property="og:url" content="liuxinixn.github.io/index.html">
<meta property="og:site_name" content="雪晟">
<meta property="og:description" content="多去尝试你从未尝试的。">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="雪晟">
<meta name="twitter:description" content="多去尝试你从未尝试的。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="liuxinixn.github.io/"/>





  <title>雪晟</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">雪晟</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">十年饮冰，难凉热血。我是雪晟。</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="liuxinixn.github.io/2018/05/16/iOS-拆分一个跟随动画/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="雪晟">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://upload.jianshu.io/users/upload_avatars/1694376/4b7e25bd43ee.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="雪晟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/16/iOS-拆分一个跟随动画/" itemprop="url">iOS 拆分一个跟随动画</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-16T17:14:21+08:00">
                2018-05-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>效果图：<img src="https://upload-images.jianshu.io/upload_images/1694376-c9b2478d7efbf6df.gif?imageMogr2/auto-orient/strip" alt="2018-05-16 17_05_51.gif"></p>
<p>主要还是对<code>layer</code>的<code>strokeStart</code>，<code>strokeEnd</code> 做动画。</p>
<p>首先是两个sublayer<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">-(void)initilize&#123;</div><div class="line">    </div><div class="line">    //线宽可以自己设置</div><div class="line">    CGFloat lineWidth = 10;</div><div class="line">    CGPoint point =  CGPointMake(self.width/2, self.height/2);</div><div class="line">    UIBezierPath *path =[UIBezierPath bezierPathWithArcCenter:point radius:(self.width - lineWidth)/2 startAngle:0 endAngle:2 *M_PI clockwise:YES];</div><div class="line">    </div><div class="line">    self.layer1 =[[CAShapeLayer alloc]init];</div><div class="line">    self.layer1.frame = self. bounds;</div><div class="line">    self.layer1.strokeColor = [UIColor hexStringToColor:@&quot;#55a34a&quot;].CGColor;</div><div class="line">    self.layer1.fillColor =[UIColor clearColor].CGColor;</div><div class="line">    self.layer1.lineWidth = lineWidth;</div><div class="line">    self.layer1.strokeEnd = 0;</div><div class="line">    self.layer1.lineCap = kCALineCapRound;</div><div class="line">    </div><div class="line">    </div><div class="line">    self.layer1.path = path.CGPath;</div><div class="line">    </div><div class="line">    [self.layer addSublayer:self.layer1];</div><div class="line">    </div><div class="line">    UIBezierPath *path2 =[UIBezierPath bezierPathWithArcCenter:point radius:(self.width - lineWidth)/2 startAngle:M_PI endAngle:3 *M_PI clockwise:YES];</div><div class="line">    self.layer2 =[[CAShapeLayer alloc]init];</div><div class="line">    self.layer2.frame = self. bounds;</div><div class="line">    self.layer2.strokeColor = [UIColor hexStringToColor:@&quot;#55a34a&quot;].CGColor;</div><div class="line">    self.layer2.fillColor =[UIColor clearColor].CGColor;</div><div class="line">    self.layer2.lineWidth = lineWidth;</div><div class="line">    self.layer2.strokeEnd = 0.00 ;</div><div class="line">    self.layer2.lineCap = kCALineCapRound;</div><div class="line">    </div><div class="line">    self.layer2.path = path2.CGPath;</div><div class="line">    </div><div class="line">    [self.layer addSublayer:self.layer2];</div><div class="line">    </div><div class="line">    </div><div class="line">    [self animationFirst];</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>每个layer添加都动画都是一样的，只是path的startAngle，endAngle不同罢了。</p>
<p>添加动画：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">-(void)addAnimation:(CAShapeLayer *)parentLayer animationValue:(NSString *)animationValue&#123;</div><div class="line">    CAAnimationGroup *group = [CAAnimationGroup animation];</div><div class="line">    </div><div class="line">    parentLayer.strokeStart=0;</div><div class="line">    //设置strokeEnd的最终值，动画的fromValue为0，</div><div class="line">    parentLayer.strokeEnd= 0;</div><div class="line">    CAKeyframeAnimation *animation1 =[CAKeyframeAnimation animationWithKeyPath:@&quot;strokeEnd&quot;];</div><div class="line">    animation1.values = @[@0.00,@0.05,@0.7,@0.8,@1,@0.05];</div><div class="line">    animation1.keyTimes = @[@0.00,@0.05,@0.7,@0.8,@0.9,@1];</div><div class="line">    </div><div class="line">    CAKeyframeAnimation *animation2 =[CAKeyframeAnimation animationWithKeyPath:@&quot;strokeStart&quot;];</div><div class="line">    animation2.values = @[@0.00,@0.3,@0.4,@1,@0.05];</div><div class="line">    animation2.keyTimes = @[@0.00,@0.7,@0.8,@0.9,@1];</div><div class="line">    group.animations = @[animation1,animation2];</div><div class="line">    </div><div class="line">    group.removedOnCompletion = NO;</div><div class="line">    group.fillMode = kCAFillModeForwards;</div><div class="line">    group.repeatCount = INT_MAX;</div><div class="line">    </div><div class="line">    group.timingFunction=[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];</div><div class="line">    group.duration = 5;</div><div class="line">    group.delegate = self;</div><div class="line">    [group setValue:animationValue forKey:@&quot;animationName&quot;];</div><div class="line">    </div><div class="line">    [parentLayer addAnimation:group forKey:@&quot;animationName&quot;];</div><div class="line">    </div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>执行动画：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">-(void)animationFirst&#123;</div><div class="line">    </div><div class="line">    [self addAnimation:self.layer1 animationValue:@&quot;layoneAnimation&quot;];</div><div class="line">    [self addAnimation:self.layer2 animationValue:@&quot;layTwoAnimation&quot;];</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>如果设置动画重复，动画会不连贯，所以在动画结束的时候重新开始动画：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">-(void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag&#123;</div><div class="line">    if ([[anim valueForKey:@&quot;animationName&quot;] isEqualToString:@&quot;layoneAnimation&quot;]) &#123;</div><div class="line">        </div><div class="line">        [self addAnimation:self.layer1 animationValue:@&quot;layoneAnimation&quot;];</div><div class="line">    &#125;</div><div class="line">    if ([[anim valueForKey:@&quot;animationName&quot;] isEqualToString:@&quot;layTwoAnimation&quot;]) &#123;</div><div class="line">        </div><div class="line">        </div><div class="line">        [self addAnimation:self.layer2 animationValue:@&quot;layTwoAnimation&quot;];</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>demo 收录在 <a href="https://github.com/liuxinixn/ProgressViewDemo" target="_blank" rel="noopener">ProgressViewDemo</a> 中。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="liuxinixn.github.io/2018/05/15/正则表达式的简单介绍/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="雪晟">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://upload.jianshu.io/users/upload_avatars/1694376/4b7e25bd43ee.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="雪晟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/15/正则表达式的简单介绍/" itemprop="url">正则表达式的简单介绍</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-15T18:43:21+08:00">
                2018-05-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>前言</p>
</blockquote>
<p><strong>正则表达式</strong>：又称正规表示法、常规表示法（英语：Regular Expression，在代码中常简写为regex、regexp或RE），计算机科学的一个概念。正则表达式使用单个字符串来描述、匹配一系列符合某个句法规则的字符串。在很多文本编辑器里，正则表达式通常被用来检索、替换那些符合某个模式的文本;</p>
<p>项目中除了校验手机号，密码格式，等等其他外，还会有其他的正则需求，所以需要学习一波。</p>
<blockquote>
<p>介绍<br>正则表达式语言由两种基本字符类型组成：原义文本字符和元字符。<br>元字符使正则表达式具有处理能力。所谓元字符就是指那些在正则表达式中具有特殊意义的专用字符，可以用来规定其前导字符（即位于元字符前面的字符）在目标对象中的出现模式。</p>
</blockquote>
<p><code>元字符</code></p>
<table>
<thead>
<tr>
<th>元字符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>^</td>
<td>匹配输入字符串开始的位置</td>
</tr>
<tr>
<td>$</td>
<td>匹配输入字符串结尾的位置</td>
</tr>
<tr>
<td>.</td>
<td>匹配除 “\n” 之外的任何单个字符。要匹配包括 ‘\n’ 在内的任何字符，请使用象 ‘[.\n]’ 的模式。</td>
</tr>
<tr>
<td>｜</td>
<td>或</td>
</tr>
<tr>
<td>,</td>
<td>分割</td>
</tr>
<tr>
<td>[ ]</td>
<td>包含,默认是一个字符长度</td>
</tr>
<tr>
<td>[0-9]</td>
<td>匹配0到9的数字</td>
</tr>
<tr>
<td>[a-z]</td>
<td>匹配小写字母</td>
</tr>
<tr>
<td>[A-Z]</td>
<td>匹配大写字母</td>
</tr>
<tr>
<td>[A-Za-z]</td>
<td>匹配字母</td>
</tr>
<tr>
<td>[A-Za-z0-9]</td>
<td>匹配字母数字</td>
</tr>
<tr>
<td>[^]</td>
<td>不包含,默认是一个字符长度</td>
</tr>
<tr>
<td>{n}</td>
<td>重复n次</td>
</tr>
<tr>
<td>{n,}</td>
<td>重复≥n次</td>
</tr>
<tr>
<td>{n,m}</td>
<td>重复≥n且≤m次</td>
</tr>
<tr>
<td>*</td>
<td>重复零次或更多次</td>
</tr>
<tr>
<td>+</td>
<td>重复一次或更多次</td>
</tr>
<tr>
<td>?</td>
<td>重复零次或一次</td>
</tr>
<tr>
<td>\     转义</td>
</tr>
<tr>
<td>\d</td>
<td>匹配数字</td>
</tr>
<tr>
<td>\w</td>
<td>匹配字母、数字或下划线字符</td>
</tr>
<tr>
<td>\s</td>
<td>匹配空白字符：空格、制表符、换页符等</td>
</tr>
<tr>
<td>\D</td>
<td>匹配非数字字符</td>
</tr>
<tr>
<td>\W</td>
<td>匹配所有与\w不匹配的字符</td>
</tr>
<tr>
<td>\S</td>
<td>匹配非空白字符</td>
</tr>
<tr>
<td>\b</td>
<td>匹配一个单词边界，也就是指单词和空格间的位置。例如， ‘er\b’ 可以匹配”never” 中的 ‘er’，但不能匹配 “verb” 中的 ‘er’。</td>
</tr>
<tr>
<td>\B</td>
<td>匹配非单词边界。’er\B’ 能匹配 “verb” 中的 ‘er’，但不能匹配 “never” 中的 ‘er’。</td>
</tr>
<tr>
<td>.</td>
<td>查找<code>.</code>,使用\来取消这些字符的特殊意义</td>
</tr>
<tr>
<td>*</td>
<td>查找<code>*</code>,使用\来取消这些字符的特殊意义</td>
</tr>
<tr>
<td>\</td>
<td>要查找<code>\</code>本身，你也得用<code>\\</code></td>
</tr>
<tr>
<td>[^x]</td>
<td>匹配除了x以外的任意字符</td>
</tr>
<tr>
<td>[^aeiou]</td>
<td>匹配除了aeiou这几个字母以外的任意字符</td>
</tr>
</tbody>
</table>
<blockquote>
<p>tip1:  重复多个字符 ()的使用</p>
</blockquote>
<p>如果要重复多个字符，可以使用小括号()来进行分组。<br>举个例子：<code>(\d{1,3}\.){3}\d{1,3}</code>是一个简单的IP地址匹配表达式.（并不准确）<br> 怎么拆分表达式呢：<br>首先，小括号里面代表的是修饰，可以分为两部分，<code>(\d{1,3}\.){3}</code>，<code>\d{1,3}</code>。<br>小括号的可以这么解释：\d{1,3}. <code>\d{1,3}</code>可以解释为1~3位的数字，<code>\.</code>是个转义字符，代表英文中的句号，中文中的点。 第一部分整体可以解释为1~3位的数字加上一个英文句号，然后重复3次。</p>
<p>然后：<code>\d{1,3}</code> 就很好解释了：一个一到三位的数字。</p>
<p><code>常用分组语法：</code><br>| 元分类  |   代码/语法  | 代码/语法 |<br>| —  | — | — |<br>| 捕获 |     (exp)     | 匹配exp,并捕获文本到自动命名的组里|<br>|捕获| (?<name>exp)     | 匹配exp,并捕获文本到名称为name的组里，也可以写成(?’name’exp)|<br>|捕获| (?:exp) |      匹配exp,不捕获匹配的文本，也不给此分组分配组号|<br>| 零宽断言     | (?=exp)     |匹配exp前面的位置|<br>| 零宽断言| (?&lt;=exp)|      匹配exp后面的位置|<br>| 零宽断言| (?!exp)|      匹配后面跟的不是exp的位置|<br>| 零宽断言| (?&lt;!exp)     | 匹配前面不是exp的位置|<br>| 注释     | (?#comment)     | 这种类型的分组不对正则表达式的处理产生任何影响，用于提供注释让人阅读| </name></p>
<p>断言用来声明一个应该为真的事实。正则表达式中只有当断言为真时才会继续进行匹配。</p>
<p>像<code>\b</code>,<code>^</code>,<code>$</code>那样用于指定一个位置，这个位置应该满足一定的条件(即断言)，因此它们也被称为<code>零宽断言</code></p>
<p><code>(?=exp)</code>也叫零宽度正预测先行断言，它断言自身出现的位置的后面能匹配表达式<code>exp</code>。比如<code>\b\w+(?=ing\b)</code>，匹配以<code>ing</code>结尾的单词的前面部分(除了<code>ing</code>以外的部分)，如查找<code>I&#39;m singing while you&#39;re dancing.</code>时，它会匹配<code>sing</code>和<code>danc</code>。</p>
<p><code>(?&lt;=exp)</code>也叫零宽度正回顾后发断言，它断言自身出现的位置的前面能匹配表达式<code>exp</code>。比如<code>(?&lt;=\bre)\w+\b</code>会匹配以<code>re</code>开头的单词的后半部分(除了<code>re</code>以外的部分)，例如在查找<code>reading a book</code>时，它匹配<code>ading</code>。</p>
<p>点击这里可以学习正则表达式相关<a href="http://c.biancheng.net/cpp/html/1417.html" target="_blank" rel="noopener">正则表达式相关学习</a></p>
<blockquote>
<p>常用的正则表达式</p>
</blockquote>
<p>1 .  用户名和密码，由6~16位字母、数字、下划线组成且第一位是字母：<br><code>^[a-zA-Z]\w{5,15}$</code><br>2 .  电话号码：<br><code>^(\d{3,4}-)\d{7,8}$</code><br>3 .  手机号码：<br><code>^1[3|4|5|7|8][0-9]{9}$</code></p>
<ol>
<li>身份证号（15位或18位数字）：<br><code>^\d{14}[[0-9],0-9xX]$</code><br>5.网址：url<br><code>^http://([\w-]+.)+[\w-]+(/[\w-./?%&amp;=])?$*</code><br>6.整数或者小数：<br><code>^[0-9]+([.][0-9]+){0,1}$</code><br>7.有1~3位小数的正实数：<br><code>^[0-9]+(.[0-9]{1,3})?$</code><br>8.汉字：<br><code>^[\u4e00-\u9fa5]{0,}$</code><br>9.只能输入两位小数的金额<br><code>^\\-?([1-9]\\d*|0)(\\.\\d{0,2})?$&quot;</code><br>使用方法：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string;</div><div class="line"></div><div class="line">&#123;</div><div class="line">    </div><div class="line">    if (textField == self.cashTextField) &#123;</div><div class="line">        if (string.length == 0) &#123;</div><div class="line">            </div><div class="line">            return YES;</div><div class="line">            </div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        //第一个参数，被替换字符串的range，第二个参数，即将键入或者粘贴的string，返回的是改变过后的新str，即textfield的新的文本内容</div><div class="line">        </div><div class="line">        NSString *checkStr = [textField.text stringByReplacingCharactersInRange:range withString:string];</div><div class="line">        </div><div class="line">        //正则表达式</div><div class="line">        </div><div class="line">        NSString *regex = @&quot;^\\-?([1-9]\\d*|0)(\\.\\d&#123;0,2&#125;)?$&quot;;</div><div class="line">        </div><div class="line">        return [self isValid:checkStr withRegex:regex];</div><div class="line">    &#125;</div><div class="line">    return YES;</div><div class="line">    </div><div class="line">&#125;</div><div class="line"></div><div class="line">//检测改变过的文本是否匹配正则表达式，如果匹配表示可以键入，否则不能键入</div><div class="line"></div><div class="line">- (BOOL) isValid:(NSString*)checkStr withRegex:(NSString*)regex</div><div class="line"></div><div class="line">&#123;</div><div class="line">    </div><div class="line">    NSPredicate *predicte = [NSPredicate predicateWithFormat:@&quot;SELF MATCHES %@&quot;,regex];</div><div class="line">    </div><div class="line">    return [predicte evaluateWithObject:checkStr];</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>等等。后续遇到会继续补充。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="liuxinixn.github.io/2018/05/10/iOS-GCD线程同步以及AFNetworking多次请求线程依赖/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="雪晟">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://upload.jianshu.io/users/upload_avatars/1694376/4b7e25bd43ee.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="雪晟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/10/iOS-GCD线程同步以及AFNetworking多次请求线程依赖/" itemprop="url">iOS GCD线程同步以及AFNetworking多次请求线程依赖</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-10T18:44:21+08:00">
                2018-05-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>前言</p>
</blockquote>
<p>针对于多线程同步以及依赖做一个小小的总结，以及当实际情况中比如在使用AFNetworking进行多次网络请求中如何进行线程依赖。</p>
<blockquote>
<p>模拟数据</p>
</blockquote>
<p>线程同步，最终执行完成操作（比如刷新UI）。<br>线程同步使用的是<code>dispatch_group</code>相关来实现。</p>
<p>测试代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">//第一步创建队列</div><div class="line">    dispatch_queue_t customQuue = dispatch_queue_create(&quot;com.manman.network&quot;, DISPATCH_QUEUE_CONCURRENT);</div><div class="line">      //第二步创建组</div><div class="line">    dispatch_group_t customGroup = dispatch_group_create();</div><div class="line">    </div><div class="line">    //第三步添加任务</div><div class="line">    dispatch_group_async(customGroup, customQuue, ^&#123;</div><div class="line">        NSLog(@&quot;吃饭&quot;);</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    dispatch_group_async(customGroup, customQuue, ^&#123;</div><div class="line">        NSLog(@&quot;洗澡&quot;);</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    dispatch_group_async(customGroup, customQuue, ^&#123;</div><div class="line">        NSLog(@&quot;睡觉&quot;);</div><div class="line">    &#125;);</div><div class="line">    dispatch_group_async(customGroup, customQuue, ^&#123;</div><div class="line">        NSLog(@&quot;起床&quot;);</div><div class="line">    &#125;);</div><div class="line">    //第四步通知</div><div class="line">    dispatch_group_notify(customGroup, dispatch_get_main_queue(), ^&#123;</div><div class="line">        NSLog(@&quot;任务完成&quot;);</div><div class="line">    &#125;);</div></pre></td></tr></table></figure></p>
<p>打印结果：<br><img src="https://upload-images.jianshu.io/upload_images/1694376-b2ded41b2e835592.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ20180510-170344@2x.png"></p>
<p>可以看到没什么问题，实现了线程同步，但是没有实现线程依赖。</p>
<p>如何实现线程依赖，依赖NSOperationQueue.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">NSBlockOperation *operation1 = [NSBlockOperation blockOperationWithBlock:^&#123;</div><div class="line">    NSLog(@&quot;吃饭&quot;);</div><div class="line">&#125;];</div><div class="line">    </div><div class="line">    </div><div class="line">NSBlockOperation *operation2 = [NSBlockOperation blockOperationWithBlock:^&#123;</div><div class="line">    NSLog(@&quot;洗澡&quot;);</div><div class="line">&#125;];</div><div class="line">    </div><div class="line">    </div><div class="line">NSBlockOperation *operation3 = [NSBlockOperation blockOperationWithBlock:^&#123;</div><div class="line">    NSLog(@&quot;起床&quot;);</div><div class="line">&#125;];</div><div class="line">    </div><div class="line">NSBlockOperation *operation4 = [NSBlockOperation blockOperationWithBlock:^&#123;</div><div class="line">    NSLog(@&quot;睡觉&quot;);</div><div class="line">&#125;];</div><div class="line">    </div><div class="line">NSBlockOperation *operation5 = [NSBlockOperation blockOperationWithBlock:^&#123;</div><div class="line">    NSLog(@&quot;第二天&quot;);</div><div class="line">&#125;];</div><div class="line">//4.设置依赖</div><div class="line">[operation2 addDependency:operation1];      //任务二依赖任务一</div><div class="line">[operation3 addDependency:operation2];      //任务三依赖任务二</div><div class="line">    </div><div class="line">[operation4 addDependency:operation3];      //任务四依赖任务三</div><div class="line"></div><div class="line">[operation5 addDependency:operation4];</div><div class="line">//5.创建队列并加入任务</div><div class="line">NSOperationQueue *queue = [[NSOperationQueue alloc] init]; [queue addOperations:@[operation3, operation2, operation1,operation4,operation5] waitUntilFinished:NO];</div><div class="line">[[NSOperationQueue mainQueue] addOperationWithBlock:^&#123;</div><div class="line">    NSLog(@&quot;任务完成&quot;);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/1694376-f4f78800773e7a3f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ20180510-175130@2x.png"></p>
<p>可以看到是同步，并且依赖。</p>
<p>模拟数据实现了同步以及依赖，那么如果换做是真实的网络请求怎么样。</p>
<blockquote>
<p>使用AFNetworking多次请求，实现线程同步以及依赖。</p>
</blockquote>
<p>首先定义一个请求方法，（这里采用的是真实数据）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">/**发起请求*/</div><div class="line">-(void)requestWithType:(NSString *)type&#123;</div><div class="line">    </div><div class="line">    AFHTTPSessionManager *manger =[AFHTTPSessionManager manager];</div><div class="line">    </div><div class="line">    manger.responseSerializer = [AFHTTPResponseSerializer serializer];</div><div class="line">    </div><div class="line">    manger.requestSerializer = [AFHTTPRequestSerializer serializer];</div><div class="line">    </div><div class="line">    manger.requestSerializer.timeoutInterval = 30;</div><div class="line">    </div><div class="line">    manger.responseSerializer.acceptableContentTypes=[NSSet setWithObjects:@&quot;application/json&quot;,@&quot;text/json&quot;,@&quot;text/javascript&quot;,@&quot;text/html&quot;,nil,nil];</div><div class="line">    </div><div class="line">    NSString  *url = @&quot;http://122.112.244.62/elevator/api/index.php/elevator/info?id=12345678711234567878&quot;;</div><div class="line">    </div><div class="line">    [manger GET:url parameters:nil progress:^(NSProgress * _Nonnull uploadProgress) &#123;</div><div class="line">        </div><div class="line">    &#125; success:^(NSURLSessionDataTask * _Nonnull task, id  _Nullable responseObject) &#123;</div><div class="line">        </div><div class="line">        NSLog(@&quot;%@&quot;,type);</div><div class="line"></div><div class="line">    &#125; failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) &#123;</div><div class="line">        </div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">        </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>同模拟数据，首先实现数据同步，只需要换个方法就行了吧。。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">//第一步创建队列</div><div class="line">   dispatch_queue_t customQuue = dispatch_queue_create(&quot;com.manman.network&quot;, DISPATCH_QUEUE_CONCURRENT);</div><div class="line">     //第二步创建组</div><div class="line">   dispatch_group_t customGroup = dispatch_group_create();</div><div class="line"></div><div class="line">   //第三步添加任务</div><div class="line">   dispatch_group_async(customGroup, customQuue, ^&#123;</div><div class="line"></div><div class="line">       [self requestWithType:@&quot;吃饭&quot;];</div><div class="line"></div><div class="line">   &#125;);</div><div class="line"></div><div class="line">   dispatch_group_async(customGroup, customQuue, ^&#123;</div><div class="line"></div><div class="line"></div><div class="line">       [self requestWithType:@&quot;洗澡&quot;];</div><div class="line"></div><div class="line"></div><div class="line">   &#125;);</div><div class="line">   dispatch_group_async(customGroup, customQuue, ^&#123;</div><div class="line"></div><div class="line">       [self requestWithType:@&quot;睡觉&quot;];</div><div class="line"></div><div class="line"></div><div class="line">   &#125;);</div><div class="line">   dispatch_group_async(customGroup, customQuue, ^&#123;</div><div class="line"></div><div class="line">       [self requestWithType:@&quot;起床&quot;];</div><div class="line"></div><div class="line">   &#125;);</div><div class="line">   //第四步通知</div><div class="line">   dispatch_group_notify(customGroup, dispatch_get_main_queue(), ^&#123;</div><div class="line">       NSLog(@&quot;任务完成&quot;);</div><div class="line">   &#125;);</div></pre></td></tr></table></figure>
<p>看一下结果，<img src="https://upload-images.jianshu.io/upload_images/1694376-c06808cfb12f9f17.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="8F4B6CFF-D8CD-4D7F-9D3F-A3FA5742BA14.png"></p>
<p>是不是好奇怪，一样的方法只是换成AFNetworking，结果就不一样了，并没有实现线程同步，我们也都知道AFNetworking在进行网络请求的时候又开启了线程。<br>那么如何实现线程同步呢，借助信号量。</p>
<p>第一种方式：使用<code>dispatch_semaphore_signal</code>。</p>
<p>dispatch_semaphore_create     创建一个semaphore<br>dispatch_semaphore_signal     发送一个信号<br>dispatch_semaphore_wait     等待信号</p>
<p>三个函数介绍：<br>第一个函数：创建一个整形数值的信号，即：信号的总量<br>第二个函数：发送一个信号,让信号总量增加1<br>第三个函数：首先判断信号量是否大于零，如果大于零则减掉1个信号量，往下执行，如果等于零则阻塞该线程</p>
<p>如何使用信号量来实现线程同步呢，<br>首先对请求方法做个改动<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">/**发起请求*/</div><div class="line">-(void)requestWithType:(NSString *)type&#123;</div><div class="line">    </div><div class="line">     dispatch_semaphore_t sema = dispatch_semaphore_create(0);</div><div class="line">    AFHTTPSessionManager *manger =[AFHTTPSessionManager manager];</div><div class="line">    </div><div class="line">    manger.responseSerializer = [AFHTTPResponseSerializer serializer];</div><div class="line">    </div><div class="line">    manger.requestSerializer = [AFHTTPRequestSerializer serializer];</div><div class="line">    </div><div class="line">    manger.requestSerializer.timeoutInterval = 30;</div><div class="line">    </div><div class="line">    manger.responseSerializer.acceptableContentTypes=[NSSet setWithObjects:@&quot;application/json&quot;,@&quot;text/json&quot;,@&quot;text/javascript&quot;,@&quot;text/html&quot;,nil,nil];</div><div class="line">    </div><div class="line">    NSString  *url = @&quot;http://122.112.244.62/elevator/api/index.php/elevator/info?id=12345678711234567878&quot;;</div><div class="line">    </div><div class="line">    [manger GET:url parameters:nil progress:^(NSProgress * _Nonnull uploadProgress) &#123;</div><div class="line">        </div><div class="line">        </div><div class="line">    &#125; success:^(NSURLSessionDataTask * _Nonnull task, id  _Nullable responseObject) &#123;</div><div class="line">        </div><div class="line">        //信号量+1</div><div class="line">        long x  = dispatch_semaphore_signal(sema);</div><div class="line">        NSLog(@&quot;%@ --%ld&quot;,type,x);</div><div class="line">        </div><div class="line">    &#125; failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) &#123;</div><div class="line">        //信号量+1</div><div class="line">         dispatch_semaphore_signal(sema);</div><div class="line">    &#125;];</div><div class="line">    //信号量-1</div><div class="line">    long x =  dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);</div><div class="line">    NSLog(@&quot;%@了 --%ld&quot;,type,x);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>看一下结果：<br><img src="https://upload-images.jianshu.io/upload_images/1694376-5ddaa920da71d025.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="2.png"></p>
<p>可以看到实现了线程同步，任务完成在最后。</p>
<p>第二种</p>
<p>dispatch_group_enter：通知group，下面的任务马上要放到group中执行了。</p>
<p>dispatch_group_leave：通知group，任务完成了，该任务要从group中移除了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">//第一步创建队列</div><div class="line">    dispatch_queue_t customQuue = dispatch_queue_create(&quot;com.manman.network&quot;, DISPATCH_QUEUE_CONCURRENT);</div><div class="line">      //第二步创建组</div><div class="line">    dispatch_group_t customGroup = dispatch_group_create();</div><div class="line"></div><div class="line">    //第三步添加任务</div><div class="line">    </div><div class="line"></div><div class="line">    dispatch_group_async(customGroup, customQuue, ^&#123;</div><div class="line"></div><div class="line">        [self requestWithType:@&quot;吃饭&quot; group:customGroup];</div><div class="line">;</div><div class="line">    &#125;);</div><div class="line"></div><div class="line"> </div><div class="line"></div><div class="line">    dispatch_group_async(customGroup, customQuue, ^&#123;</div><div class="line"> </div><div class="line">        [self requestWithType:@&quot;洗澡&quot; group:customGroup];</div><div class="line">     </div><div class="line"></div><div class="line"></div><div class="line">    &#125;);</div><div class="line">  </div><div class="line">    </div><div class="line">    dispatch_group_async(customGroup, customQuue, ^&#123;</div><div class="line">     </div><div class="line">        [self requestWithType:@&quot;睡觉&quot; group:customGroup];</div><div class="line"></div><div class="line"></div><div class="line">    &#125;);</div><div class="line">   </div><div class="line">    dispatch_group_async(customGroup, customQuue, ^&#123;</div><div class="line">       </div><div class="line"></div><div class="line">        [self requestWithType:@&quot;起床&quot; group:customGroup];</div><div class="line">        </div><div class="line"></div><div class="line">    &#125;);</div><div class="line">    </div><div class="line"></div><div class="line">    //第四步通知</div><div class="line">    dispatch_group_notify(customGroup, dispatch_get_main_queue(), ^&#123;</div><div class="line">        NSLog(@&quot;任务完成&quot;);</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<p>请求方式修改：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">/**发起请求*/</div><div class="line">-(void)requestWithType:(NSString *)type group:(dispatch_group_t)group&#123;</div><div class="line">    </div><div class="line">    </div><div class="line">    dispatch_group_enter(group);</div><div class="line">    AFHTTPSessionManager *manger =[AFHTTPSessionManager manager];</div><div class="line">    </div><div class="line">    manger.responseSerializer = [AFHTTPResponseSerializer serializer];</div><div class="line">    </div><div class="line">    manger.requestSerializer = [AFHTTPRequestSerializer serializer];</div><div class="line">    </div><div class="line">    manger.requestSerializer.timeoutInterval = 30;</div><div class="line">    </div><div class="line">    manger.responseSerializer.acceptableContentTypes=[NSSet setWithObjects:@&quot;application/json&quot;,@&quot;text/json&quot;,@&quot;text/javascript&quot;,@&quot;text/html&quot;,nil,nil];</div><div class="line">    </div><div class="line">    NSString  *url = @&quot;http://122.112.244.62/elevator/api/index.php/elevator/info?id=12345678711234567878&quot;;</div><div class="line">    </div><div class="line">    [manger GET:url parameters:nil progress:^(NSProgress * _Nonnull uploadProgress) &#123;</div><div class="line">        </div><div class="line">        </div><div class="line">    &#125; success:^(NSURLSessionDataTask * _Nonnull task, id  _Nullable responseObject) &#123;</div><div class="line">        NSLog(@&quot;%@&quot;,type);</div><div class="line"></div><div class="line">        dispatch_group_leave(group);</div><div class="line">        </div><div class="line">    &#125; failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) &#123;</div><div class="line"></div><div class="line">        dispatch_group_leave(group);</div><div class="line">    &#125;];</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>打印结果:<img src="https://upload-images.jianshu.io/upload_images/1694376-49c3551f3c894a8c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="3.png"></p>
<p>可以看到实现了线程同步。但是并未依赖。</p>
<p>如何实现线程依赖。</p>
<p>NSOperation 结合信号量来实现。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div></pre></td><td class="code"><pre><div class="line">  NSBlockOperation *operation1 = [NSBlockOperation blockOperationWithBlock:^&#123;</div><div class="line">           [self requestWithType:@&quot;吃饭&quot;];</div><div class="line">        &#125;];</div><div class="line"></div><div class="line"></div><div class="line">        NSBlockOperation *operation2 = [NSBlockOperation blockOperationWithBlock:^&#123;</div><div class="line">            [self requestWithType:@&quot;洗澡&quot;];</div><div class="line"></div><div class="line">        &#125;];</div><div class="line"></div><div class="line"></div><div class="line">        NSBlockOperation *operation3 = [NSBlockOperation blockOperationWithBlock:^&#123;</div><div class="line">            [self requestWithType:@&quot;起床&quot;];</div><div class="line"></div><div class="line">        &#125;];</div><div class="line"></div><div class="line">        NSBlockOperation *operation4 = [NSBlockOperation blockOperationWithBlock:^&#123;</div><div class="line">            [self requestWithType:@&quot;睡觉&quot;];</div><div class="line"></div><div class="line">        &#125;];</div><div class="line"></div><div class="line">        NSBlockOperation *operation5 = [NSBlockOperation blockOperationWithBlock:^&#123;</div><div class="line">            [self requestWithType:@&quot;第二天&quot;];</div><div class="line"></div><div class="line">        &#125;];</div><div class="line">    </div><div class="line">    NSBlockOperation *operation6 = [NSBlockOperation blockOperationWithBlock:^&#123;</div><div class="line">        [[NSOperationQueue mainQueue] addOperationWithBlock:^&#123;</div><div class="line">            NSLog(@&quot;任务完成,刷新UI&quot;);</div><div class="line">        &#125;];</div><div class="line">        </div><div class="line">    &#125;];</div><div class="line">        //4.设置依赖</div><div class="line">        [operation2 addDependency:operation1];      //任务二依赖任务一</div><div class="line">        [operation3 addDependency:operation2];      //任务三依赖任务二</div><div class="line"></div><div class="line">        [operation4 addDependency:operation3];      //任务四依赖任务三</div><div class="line"></div><div class="line">        [operation5 addDependency:operation4];</div><div class="line">        [operation6 addDependency:operation5];</div><div class="line"></div><div class="line">    </div><div class="line">        //5.创建队列并加入任务</div><div class="line">        NSOperationQueue *queue = [[NSOperationQueue alloc] init]; [queue addOperations:@[operation3, operation2, operation1,operation4,operation5,operation6] waitUntilFinished:NO];</div><div class="line"></div><div class="line">    </div><div class="line">    </div><div class="line">&#125;</div><div class="line"></div><div class="line">/**发起请求*/</div><div class="line">-(void)requestWithType:(NSString *)type&#123;</div><div class="line">    </div><div class="line">    </div><div class="line">    dispatch_semaphore_t sema = dispatch_semaphore_create(0);</div><div class="line">    AFHTTPSessionManager *manger =[AFHTTPSessionManager manager];</div><div class="line">    </div><div class="line">    manger.responseSerializer = [AFHTTPResponseSerializer serializer];</div><div class="line">    </div><div class="line">    manger.requestSerializer = [AFHTTPRequestSerializer serializer];</div><div class="line">    </div><div class="line">    manger.requestSerializer.timeoutInterval = 30;</div><div class="line">    </div><div class="line">    manger.responseSerializer.acceptableContentTypes=[NSSet setWithObjects:@&quot;application/json&quot;,@&quot;text/json&quot;,@&quot;text/javascript&quot;,@&quot;text/html&quot;,nil,nil];</div><div class="line">    </div><div class="line">    NSString  *url = @&quot;http://122.112.244.62/elevator/api/index.php/elevator/info?id=12345678711234567878&quot;;</div><div class="line">    </div><div class="line">    [manger GET:url parameters:nil progress:^(NSProgress * _Nonnull uploadProgress) &#123;</div><div class="line">        </div><div class="line">        </div><div class="line">    &#125; success:^(NSURLSessionDataTask * _Nonnull task, id  _Nullable responseObject) &#123;</div><div class="line">        NSLog(@&quot;%@&quot;,type);</div><div class="line"></div><div class="line">        dispatch_semaphore_signal(sema);</div><div class="line">        </div><div class="line">    &#125; failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) &#123;</div><div class="line">     dispatch_semaphore_signal(sema);</div><div class="line">        </div><div class="line">    &#125;];</div><div class="line">    dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>打印结果：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/1694376-2c0692cf3f76c966.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="3A128FD1-944F-4CD2-BA3A-D9EA5BA72295.png"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="liuxinixn.github.io/2018/05/08/iOS--接入谷歌地图/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="雪晟">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://upload.jianshu.io/users/upload_avatars/1694376/4b7e25bd43ee.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="雪晟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/08/iOS--接入谷歌地图/" itemprop="url">iOS 接入谷歌地图</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-08T18:55:21+08:00">
                2018-05-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>前言</p>
</blockquote>
<p>项目为国外服务，所以需要接入谷歌地图。第一次接入，简单总结下。</p>
<blockquote>
<p>谷歌地图接入</p>
</blockquote>
<p>同百度，高德地图，先去 <a href="https://developers.google.cn/maps/" target="_blank" rel="noopener">谷歌开发者中心注册</a>，拿到key，绑定应用的bundleId.</p>
<p>第一步：</p>
<p>通过pod 集成<br><code>pod &#39;GoogleMaps&#39;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">添加下面的key到plist中，添加定位相关私有信息配置。</div><div class="line">&lt;key&gt;LSApplicationQueriesSchemes&lt;/key&gt;</div><div class="line">&lt;array&gt;</div><div class="line">    &lt;string&gt;googlechromes&lt;/string&gt;</div><div class="line">    &lt;string&gt;comgooglemaps&lt;/string&gt;</div><div class="line">&lt;/array&gt;</div><div class="line">//引入框架</div><div class="line"></div><div class="line">@import GoogleMaps;</div><div class="line"></div><div class="line">AppDelegate 里完成对SDK的注册，完成认证。（key如果异常，地图会加载不出来）</div><div class="line"></div><div class="line">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123;</div><div class="line"></div><div class="line">    [GMSServices provideAPIKey:YOUR_API_KEY];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>第二步：显示地图。</p>
<p>引入框架，<code>#import &lt;GoogleMaps/GoogleMaps.h&gt;</code></p>
<p>谷歌地图的视图通过类<code>GMSMapView</code>来展示。<br><code>GMSMapView</code>初始化方式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">+ (instancetype)mapWithFrame:(CGRect)frame camera:(GMSCameraPosition *)camera;</div></pre></td></tr></table></figure></p>
<p>可以看到camera不能为空，camera可以理解为一个初始定位点，后面我们获得用户的位置之后，可以重新设置用户的位置为定位点。</p>
<blockquote>
<p>地图的一些主要属性：</p>
</blockquote>
<p>是否启用指南针<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mapView.settings.compassButton = YES;</div></pre></td></tr></table></figure></p>
<p>仅当启用了<code>My Location</code> 按钮时，<code>My Location</code> 按钮才会出现在屏幕的右下角。 当用户点击该按钮时，如果当前已知用户的位置，摄像头会以动画方式聚焦于用户的当前位置。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mapView.settings.myLocationButton = YES;</div></pre></td></tr></table></figure>
<p>是否禁用平移和缩放手势<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mapView.settings.scrollGestures = NO;</div><div class="line"> mapView.settings.zoomGestures = NO;</div></pre></td></tr></table></figure></p>
<p>然后就是大头针，（谷歌地图成其为标记<code>GMSMarker</code>对象）,要添加标记，请创建一个包含 position 和 title 的 GMSMarker 对象，并设置其 map,您可以通过将 marker.appearAnimation 属性设置为 kGMSMarkerAnimationPop，从而以动画呈现方式将新标记添加到地图中。</p>
<p>添加标记：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">CLLocationCoordinate2D position = CLLocationCoordinate2DMake(10, 10);</div><div class="line">GMSMarker *marker = [GMSMarker markerWithPosition:position];</div><div class="line">marker.title = @&quot;Hello World&quot;;</div><div class="line">marker.map = mapView;</div></pre></td></tr></table></figure>
<p>删除标记(通过将 <code>GMSMarke</code> 的 <code>map</code> 属性设置为<code>nil</code>，您可以将标记从地图中移除。 或者，您也可以通过调用 <code>GMSMapView</code> 的<code>clear</code> 方法移除目前地图上的所有叠层（包括标记）。)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">marker.map = nil;</div></pre></td></tr></table></figure>
<p>清除所有标记，叠层<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[mapView clear]</div></pre></td></tr></table></figure></p>
<p>标记（大头针的一些属性）<br>//更改大头针的图片<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">marker.icon = [GMSMarker markerImageWithColor:[UIColor blackColor]];</div><div class="line">marker.icon = [UIImage imageNamed:@&quot;house&quot;];</div></pre></td></tr></table></figure></p>
<p>自定义大头针,使用<code>iconView</code>属性,<code>iconView</code> 不会响应用户交互，因为它只是一张视图快照</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">marker.iconView = [[UIImageView alloc] initWithImage:house];</div></pre></td></tr></table></figure>
<p>添加信息窗口（也就是弹出气泡）</p>
<p>您可以在用户点按标记时，通过信息窗口向其显示信息。 一次只能显示一个信息窗口。 如果用户点按另一个标记，将隐藏当前窗口，并打开新的信息窗口。</p>
<p>信息窗口的内容由 <code>title 和 snippet</code>属性定义。 如果 <code>title</code> 和 <code>snippet</code> 属性均为空白或 <code>nil</code>，点击该标记将不会显示信息窗口。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">CLLocationCoordinate2D position = CLLocationCoordinate2DMake(51.5, -0.127);</div><div class="line">GMSMarker *london = [GMSMarker markerWithPosition:position];</div><div class="line">london.title = @&quot;London&quot;;</div><div class="line">london.map = mapView;</div></pre></td></tr></table></figure>
<p>使用 `snippet 属性，您可以添加其他文本，该文本将以较小的字体显示在标题下面。 超出信息窗口宽度的字符串将自动换成多行。 特别长的消息可能会被截断</p>
<p>将信息窗口设置为自动刷新</p>
<p>如果您希望信息窗口的新属性或内容在更改后立即显示，而不用等待信息窗口先隐藏更改然后再将其显示，请将标记的<code>tracksInfoWindowChanges</code>设为 <code>YES</code> 或<code>true</code>。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">marker.tracksInfoWindowChanges = YES;</div></pre></td></tr></table></figure></p>
<p>更改信息窗口的位置</p>
<p>息窗口绘制时朝向设备屏幕的相反方向，在其关联标记的上方居中显示。 您可以通过设置 <code>infoWindowAnchor</code> 属性来更改信息窗口相对于标记的位置。 此属性可接受 <code>CGPoint</code>，它定义为<code>(x,y)</code> 偏移，其中 x 和 y 的范围都介于<code>0.0</code> 和 <code>1.0</code>之间。默认偏移为<code>(0.5, 0.0)</code>，即顶部中心。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">CLLocationCoordinate2D position = CLLocationCoordinate2DMake(51.5, -0.127);</div><div class="line">GMSMarker *london = [GMSMarker markerWithPosition:position];</div><div class="line">london.title = @&quot;London&quot;;</div><div class="line">london.snippet = @&quot;Population: 8,174,100&quot;;</div><div class="line">london.infoWindowAnchor = CGPointMake(0.5, 0.5);</div><div class="line">london.icon = [UIImage imageNamed:@&quot;house&quot;];</div><div class="line">london.map = mapView;</div></pre></td></tr></table></figure></p>
<p>至于如何定位，获取用户的位置，使用系统的<code>CLLocationManager</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">-(CLLocationManager *)locationManager&#123;</div><div class="line">    if (!_locationManager) &#123;</div><div class="line">        _locationManager = [[CLLocationManager alloc]init];</div><div class="line">        _locationManager.delegate = self;</div><div class="line">        [_locationManager requestAlwaysAuthorization];//授权方式，如果在后台也需要定位，那就选择 requestAlwaysAuthorization。</div><div class="line">        _locationManager.desiredAccuracy = kCLLocationAccuracyBest;//最精确的定位</div><div class="line">        _locationManager.distanceFilter = kCLDistanceFilterNone; // 默认是kCLDistanceFilterNone，也可以设置其他值，表示用户移动的距离小于该范围内就不会接收到通知</div><div class="line">       </div><div class="line">    &#125;</div><div class="line">    return _locationManager;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>遵守协议后，实现下面的代理方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations&#123;</div><div class="line">    CLLocation *curLocation = [locations lastObject];</div><div class="line">    // 通过location  或得到当前位置的经纬度</div><div class="line">    CLLocationCoordinate2D curCoordinate2D = curLocation.coordinate;</div><div class="line">    GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:curCoordinate2D.latitude longitude:curCoordinate2D.longitude zoom:6];</div><div class="line"></div><div class="line">    self.mapView.camera = camera;//这句话很重要很重要，将我们获取到的经纬度转成影像并赋值给地图的camera属性</div><div class="line">    [self.locationManager stopUpdatingLocation];//定位成功后停止定位</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>最后看一下<code>&lt;GMSMapViewDelegate&gt;</code> 几个常用协议参考,可以类比一下百度或者高德地图，基本大同小异。</p>
<p>//地图即将移动<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- (void)mapView:(GMSMapView *)mapView willMove:(BOOL)gesture;</div></pre></td></tr></table></figure></p>
<p>在特定坐标点击手势后调用，但仅在未点击标记时调用。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- (void)mapView:(GMSMapView *)mapView didTapAtCoordinate:(CLLocationCoordinate2D)coordinate;</div></pre></td></tr></table></figure></p>
<p>在点击标记后调用。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- (BOOL)mapView:(GMSMapView *)mapView didTapMarker:(GMSMarker *)marker;</div></pre></td></tr></table></figure></p>
<p>在点击标记的信息窗口后调用。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- (void)mapView:(GMSMapView *)mapView didTapInfoWindowOfMarker:(GMSMarker *)marker;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>end</p>
</blockquote>
<p>电脑，手机都需要翻墙。负责地图会加载不出来。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="liuxinixn.github.io/2018/05/04/Java之变量，常量，常用运算符，条件控制语句/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="雪晟">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://upload.jianshu.io/users/upload_avatars/1694376/4b7e25bd43ee.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="雪晟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/04/Java之变量，常量，常用运算符，条件控制语句/" itemprop="url">Java之变量，常量，常用运算符，条件控制语句</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-04T18:18:21+08:00">
                2018-05-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>前言</p>
</blockquote>
<p>项目太紧， Java 学习停滞了一些。<br>一般的套路都是关键字，变量，常量，数据类型,运算符，控制语句，数组，方法（也叫函数）等等。所以还是走一遍。</p>
<blockquote>
<p>变量，常量</p>
</blockquote>
<p>首先每种语言都有自己的<code>关键字</code>，后面的命名是不能用的。</p>
<p>Java的关键字：<img src="https://upload-images.jianshu.io/upload_images/1694376-7b568afd98bb8805.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="53588ce900019bee05190178.jpg"></p>
<p>不需要全部记住，混个眼熟就行，<code>Java 关键字是区分大小写的哦！</code></p>
<p><code>标识符</code></p>
<p>何为标识符，标识符就是用于给<code>Java</code> 程序中变量、类、方法等命名的符号。</p>
<ol>
<li><p>标识符可以由字母、数字、下划线（_）、美元符（$）组成，但不能包含 @、%、空格等其它特殊字符，不能以数字开头。譬如：<code>123name</code>就是不合法滴</p>
<ol>
<li><p>标识符不能是 <code>Java</code>关键字和保留字（ <code>Java</code>预留的关键字，以后的升级版本中有可能作为关键字），但可以包含关键字和保留字。如：不可以使用 <code>void</code> 作为标识符，但是 <code>Myvoid</code>可以</p>
</li>
<li><p>标识符是严格区分大小写的。 所以涅，一定要分清楚 <code>hello</code>和 <code>Hello</code> 是两个不同的标识符哦！</p>
</li>
<li><p>标识符的命名最好能反映出其作用，做到见名知意。</p>
</li>
</ol>
</li>
</ol>
<p><code>变量</code></p>
<p>变量就相当于一个容器，你可以放置任何东西。</p>
<p>在 <code>Java</code>中，我们通过三个元素描述变量：变量类型、变量名以及变量值。</p>
<p>房间，客人，房间类型三者之间的关系可以类比三个元素的关系。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/1694376-48bff790fb57d235.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="535a6c6000015cda02910139.jpg"></p>
<p>如果我们把变量比作是酒店的房间，要存储的数据就好比要住宿的客人，我们可以根据客人的要求安排其入住“标准间”或者是“总统套房”，并且可以根据房间名字快速查找到入住客人的信息。同理，在<code>Java</code>程序中，我们也可以根据所需要保存的数据的格式，将其保存在指定类型的变量空间中，并且通过变量名快速定位！</p>
<p><img src="https://upload-images.jianshu.io/upload_images/1694376-0ddf4c0321c85d06.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="WX20180504-181621@2x.png"></p>
<p>变量的命名规范：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/1694376-8d888233ec105431.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="535a3ad60001057407870199.jpg"></p>
<p>1、变量名由多单词组成时，第一个单词的首字母小写，其后单词的首字母大写，俗称骆驼式命名法（也称驼峰命名法），如 <code>myAge</code></p>
<p>2、变量命名时，尽量简短且能清楚的表达变量的作用，做到见名知意。如：定义变量名 <code>stuName</code>保存“学生姓名”信息</p>
<p>PS： <code>Java</code> 变量名的长度没有限制，但 <code>Java</code> 语言是区分大小写的，所以 <code>price</code> 和 <code>Price</code> 是两个完全不同的变量！</p>
<p><code>数据类型</code></p>
<p>通常情况下，为了方便物品的存储，我们会规定每个盒子可以存放的物品种类，就好比在“放臭袜子的盒子”里我们是不会放“面包”的！同理，变量的存储也讲究“分门别类”！</p>
<p>Java 语言是一种强类型语言。通俗点说就是，在 <code>Java</code> 中存储的数据都是有类型的，而且必须在编译时就确定其类型。 Java` 中有两类数据类型：<br><img src="https://upload-images.jianshu.io/upload_images/1694376-f71ebee70818da47.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="535a6fc10001b8f604930247.jpg"></p>
<p>常用的基本数据类型有：<img src="https://upload-images.jianshu.io/upload_images/1694376-249ae225313bcf33.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="540d468d000167bd07000130.jpg"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">public class HelloWorld&#123;</div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">		   String   name=&quot;雪晟&quot;;</div><div class="line">		    char  sex=&apos;男&apos;;</div><div class="line">		    int  num=18;</div><div class="line">		   double   price=120.5;</div><div class="line">		   boolean   isOK=true;</div><div class="line">		System.out.println(name);</div><div class="line">		System.out.println(sex);</div><div class="line">		System.out.println(num);</div><div class="line">		System.out.println(price);</div><div class="line">		System.out.println(isOK);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>那么变量的<code>规则</code>需要说明一下,基本上计算机语言习惯都是酱紫。</p>
<p>1、<code>Java</code> 中的变量需要先声明后使用<br>2、变量使用时，可以声明变量的同时进行初始化<br>3、变量中每次只能赋一个值，但可以修改多次<br>4、<code>main</code> 方法中定义的变量必须先赋值，然后才能输出<br>5、虽然语法中没有提示错误，但在实际开发中，变量名不建议使用中文，容易产生安全隐患，譬如后期跨平台操作时出现乱码等等</p>
<p>每种语言都有它的<code>自动类型转换</code>。<br>在 Java 程序中，不同的基本数据类型的数据之间经常需要进行相互转换。例如：<img src="https://upload-images.jianshu.io/upload_images/1694376-9b7b709339c0fe19.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="5359d0c70001ffe202530066.jpg"></p>
<p>代码中<code>int</code>型变量<code>score1</code> 可以直接为<code>double</code>型变量 <code>score2</code> 完成赋值操作，运行结果为：<code>82.0</code></p>
<p>这种转换称为##自动类型转换##。</p>
<p>当然自动类型转换是需要满足特定的条件的：</p>
<ol>
<li>目标类型能与源类型兼容，如 <code>double</code>型兼容<code>int</code> 型，但是 <code>char</code>型不能兼容<code>int</code> 型</li>
<li>目标类型大于源类型，如 <code>double</code> 类型长度为 8 字节， int 类型为 4 字节，因此<code>double</code>类型的变量里直接可以存放 <code>int</code> 类型的数据，但反过来就不可以了。</li>
</ol>
<p><code>Java中的强制类型转换</code></p>
<p>当程序中需要将 <code>double</code>型变量的值赋给一个<code>int</code> 型变量，该如何实现呢？</p>
<p>显然，这种转换是不会自动进行的！因为 <code>int</code> 型的存储范围比<code>double</code> 型的小。此时就需要通过强制类型转换来实现了。<br>语法：( 数据类型 ) 数值<img src="https://upload-images.jianshu.io/upload_images/1694376-991864f5353ca0ca.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="53688a9a0001f73404330109.jpg"></p>
<p><code>强制类型转换可能会造成数据的丢失哦</code></p>
<p><code>Java常量的应用</code><br>所谓常量，我们可以理解为是一种特殊的变量，它的值被设定后，在程序运行过程中不允许改变。这个和OC就有一点不同。</p>
<p>语法：final 常量名 = 值;</p>
<p><a href="http://img.mukewang.com/53689a880001620703990081.jpg" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/1694376-88b589774ac78527.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></a></p>
<p><code>常量名一般使用大写字符</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">public class HelloWorld&#123;</div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">		</div><div class="line">		final String MAN = &quot;男&quot;;</div><div class="line">		final String WOMAN = &quot;女&quot;;</div><div class="line">		System.out.println(MAN);</div><div class="line">		System.out.println(WOMAN);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>运算符</p>
</blockquote>
<p>运算符是一种“功能”符号，用以通知 Java 进行相关的运算。<br>通用的运算符有以下几种：<br>1.算术运算符<br><img src="https://upload-images.jianshu.io/upload_images/1694376-f827e45df8dc11b4.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="5368a1a10001da7603050148.jpg"><br>2.赋值运算符<br><img src="https://upload-images.jianshu.io/upload_images/1694376-7b3949e8546e8548.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="5360ebdb0001401b04430144.jpg"></p>
<p>3.比较运算符</p>
<p><img src="https://upload-images.jianshu.io/upload_images/1694376-fe2438342b8319a7.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="536063f00001b7b904350145.jpg"></p>
<p>4.逻辑运算符<br><img src="https://upload-images.jianshu.io/upload_images/1694376-0c2e1bada0b532d0.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="5360ef9700017b9405870095.jpg"><br>5.条件运算符</p>
<p>条件运算符（ ? : ）也称为 “三元运算符”。</p>
<p>语法形式：布尔表达式 ？ 表达式1 ：表达式2</p>
<p>运算过程：如果布尔表达式的值为 <code>true</code> ，则返回 表达式<code>1</code> 的值，否则返回 表达式<code>2</code> 的值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">public class HelloWorld&#123;</div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">		int score=68;</div><div class="line">		String mark = (68 &gt; 60) ? &quot;及格&quot; : &quot;不及格&quot;;</div><div class="line">		System.out.println(&quot;考试成绩如何：&quot;+mark);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Java中运算符的优先级</p>
<p>所谓优先级，就是在表达式中的运算顺序。Java 中常用的运算符的优先级如下表所示：<br><img src="https://upload-images.jianshu.io/upload_images/1694376-e60b03b0d69b2450.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="5360ffb90001b4f002620224.jpg"></p>
<p><strong>级别为 1 的优先级最高，级别 11 的优先级最低</strong></p>
<blockquote>
<p>条件控制语句</p>
</blockquote>
<p>基本上都是if ..else ,do while(先执行，后判断do…while 语句保证循环至少被执行一次),for,break(跳出循环，执行后面的语句)， continue（跳过本次循环，执行下一次循环）。基本上没有什么变化。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="liuxinixn.github.io/2018/04/13/第一个Java程序/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="雪晟">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://upload.jianshu.io/users/upload_avatars/1694376/4b7e25bd43ee.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="雪晟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/13/第一个Java程序/" itemprop="url">第一个Java程序</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-13T16:15:21+08:00">
                2018-04-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>前言<br>常见的<code>IDE</code>有很多,比如：<code>Eclipse</code>，<code>MyEclipse</code>,<code>IEDA</code>.初学就选择<code>MyEclipse</code>，因为里面集成的更多，但是IEDA对开发者更友好，后期再慢慢体验。<br>推荐一个地址，<a href="http://www.sdifen.com/myeclipse2017ci3.html" target="_blank" rel="noopener">MyEclipse 2017  C13</a> ,博客说是破解版，但是我在配置了Java的环境变量之后总是提示如下：<img src="https://upload-images.jianshu.io/upload_images/1694376-3d3f7c504ac1842e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="BED55AEB7654D53DDE1A32ADC30D2AB1.jpg"></p>
</blockquote>
<p>网上看了一下，还是没有破解，幸运的是<code>MyEclipse</code>也能使用了。(公司家里网速太慢，足足下了一天。。)</p>
<blockquote>
<p>使用MyEclipse编写第一个Java程序</p>
</blockquote>
<p>前面用记事本走了一下流程。接下来用MyEclipse过一遍</p>
<p><strong>第一步，新建一个Java工程。</strong><br> <img src="https://upload-images.jianshu.io/upload_images/1694376-3aceabc750a7acc6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="WX20180413-160057@2x.png"></p>
<p>如果你和我一样不小心关闭了左侧的<code>Package Explorer</code>那么可以在如图添加需要的面板。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/1694376-318e80f93038cd78.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="WX20180413-160231@2x.png"></p>
<p>新建工程之后如图：<br><img src="https://upload-images.jianshu.io/upload_images/1694376-767491cab6bc3bfa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="WX20180413-160416@2x.png"></p>
<p><code>src</code>是管理源文件的，但是为了防止重名我们需要使用另一个管理源文件的工具：<code>Package</code>。<br>可以单独新建一个包，如图：<img src="https://upload-images.jianshu.io/upload_images/1694376-eab0d394c7e97204.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="WX20180413-160648@2x.png"></p>
<p>也可以在新建源文件的时候就备注好包名：<img src="https://upload-images.jianshu.io/upload_images/1694376-e1f5b9b14387a8ab.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="新建源文件.png"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/1694376-ac5300561052408f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="WX20180413-160834@2x.png"></p>
<p>最后如图：<img src="https://upload-images.jianshu.io/upload_images/1694376-75d188de3899af7a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="WX20180413-160915@2x.png"></p>
<p>接下来我们就可以写自己的代码，从HelloWorld开始。</p>
<p>老规矩，main函数还是入口。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">package xuesheng;</div><div class="line"></div><div class="line">public class HelloWorld &#123;</div><div class="line">	public static void main (String[] args)&#123;</div><div class="line">		System.out.println(&quot;Hello World&quot;);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>运行代码方式很多，这两种都可以<br><img src="https://upload-images.jianshu.io/upload_images/1694376-dca6eae135518c62.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="WX20180413-161416@2x.png"></p>
<p>最后控制台会输出：<br><img src="https://upload-images.jianshu.io/upload_images/1694376-252a3b1ce44eeb70.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="WX20180413-161433@2x.png"></p>
<blockquote>
<p>end</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="liuxinixn.github.io/2018/04/12/iOS-一个浮动按钮，可以任意设置父视图/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="雪晟">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://upload.jianshu.io/users/upload_avatars/1694376/4b7e25bd43ee.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="雪晟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/12/iOS-一个浮动按钮，可以任意设置父视图/" itemprop="url">iOS 一个浮动按钮，可以任意设置父视图</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-12T17:35:51+08:00">
                2018-04-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>前言</p>
</blockquote>
<p>在开发过程中，我们偶尔在个别页面需要做一个浮动按钮。这个按钮要么加载在当前控制器中，要么加载在<code>Window</code>中。</p>
<p>为了进一步扩展，将按钮的父视图扩展为任意<code>UIView</code>.</p>
<p>对于加载在当前控制器的情况，我们需要考虑的是是否有<code>navbar</code>,<code>tabbar</code>,兼容<code>iOS11</code> 就需要考虑安全区域的问题。所以封装一个浮动按钮，需要暴露的接口为2个：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">/**传入父View*/</div><div class="line">@property(nonatomic,weak) UIView *parentView;</div><div class="line"></div><div class="line">/**安全边距，主要是针对有Navbar 以及 tabbar的*/</div><div class="line">@property(nonatomic,assign)UIEdgeInsets safeInsets;</div></pre></td></tr></table></figure>
<blockquote>
<p>实现</p>
</blockquote>
<p>为UIButton添加收拾，然后增加判断即可。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">-(void)initilize&#123;</div><div class="line">    </div><div class="line">    self.safeInsets = UIEdgeInsetsMake(0, 0, 0, 0);</div><div class="line">    //添加手势</div><div class="line">    UIPanGestureRecognizer * panGestureRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(doMoveAction:)];</div><div class="line">    [self addGestureRecognizer:panGestureRecognizer];</div><div class="line"></div><div class="line">   </div><div class="line">&#125;</div><div class="line">-(void)setParentView:(UIView *)parentView&#123;</div><div class="line">    _parentView = parentView;</div><div class="line">&#125;</div><div class="line">#pragma mark - 手势方法</div><div class="line">- (void)doMoveAction:(UIPanGestureRecognizer *)recognizer</div><div class="line">&#123;</div><div class="line">    //1、手势在self.view坐标系中移动的位置</div><div class="line">    CGPoint translation = [recognizer translationInView:self.parentView];</div><div class="line">    CGPoint newCenter = CGPointMake(recognizer.view.center.x + translation.x,</div><div class="line">                                    recognizer.view.center.y + translation.y);</div><div class="line">    </div><div class="line">    //2、限制屏幕范围：</div><div class="line">    </div><div class="line">    //上边界的限制</div><div class="line">    newCenter.y = MAX(recognizer.view.frame.size.height/2 + self.safeInsets.top, newCenter.y);</div><div class="line">    </div><div class="line">    //下边界的限制</div><div class="line">    newCenter.y = MIN(self.parentView.height - self.safeInsets.bottom- recognizer.view.frame.size.height/2, newCenter.y);</div><div class="line">    </div><div class="line">    //左边界的限制</div><div class="line">    newCenter.x = MAX(recognizer.view.frame.size.width/2, newCenter.x);</div><div class="line">    </div><div class="line">     //右边界的限制</div><div class="line">    newCenter.x = MIN(self.parentView.width - recognizer.view.frame.size.width/2,newCenter.x);</div><div class="line">    </div><div class="line">    //设置中心点范围</div><div class="line">    recognizer.view.center = newCenter;</div><div class="line">    //3、将手势坐标点归0、否则会累加</div><div class="line">    [recognizer setTranslation:CGPointZero inView:self.parentView];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>示例</p>
</blockquote>
<p>示例里，添加到当前控制器里有显示<code>navbar</code>，隐藏<code>navbar</code>, 显示到<code>Window</code>上的，有显示在自定义<code>View</code>上的，安全区域就是个判断问题。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">button.safeInsets = UIEdgeInsetsMake(NAVH, 0, ELSareArea , 0);</div><div class="line">  [self.view addSubview:button];</div><div class="line">  </div><div class="line">  </div><div class="line">  button.parentView = self.view;</div></pre></td></tr></table></figure>
<blockquote>
<p>效果</p>
</blockquote>
<p><img src="https://upload-images.jianshu.io/upload_images/1694376-94f6f456553d1aa3.gif?imageMogr2/auto-orient/strip" alt="浮动.gif"></p>
<p>demo地址：<a href="https://github.com/liuxinixn/LXFloatingButton" target="_blank" rel="noopener">LXFloatingButton</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="liuxinixn.github.io/2018/04/11/使用记事本编写一个Java程序/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="雪晟">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://upload.jianshu.io/users/upload_avatars/1694376/4b7e25bd43ee.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="雪晟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/11/使用记事本编写一个Java程序/" itemprop="url">使用记事本编写一个Java程序</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-11T11:53:22+08:00">
                2018-04-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>打开一个<code>text</code>文件，后缀改为<code>.java</code>。</p>
<p>然后输入如下的代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">public class HelloWorld&#123;</div><div class="line">    public static void main(String[] args)&#123;</div><div class="line">        System.out.println(&quot;welcome to java&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>先看一张图：<img src="https://upload-images.jianshu.io/upload_images/1694376-cfbbcb28903e5e44.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ20180411-114219@2x.png"></p>
<p>编写好了之后如何运行呢，需要用到编译器，也就是<code>javac</code> 指令。<br><code>Java manman$ javac HelloWorld.java</code></p>
<p>编译之后会生成一个后缀为<code>.class</code>的文件，也就是上一章说的二进制字节码文件。<br><img src="https://upload-images.jianshu.io/upload_images/1694376-a2a910fd5c1d1850.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ20180411-114638@2x.png"></p>
<p>然后需要用解释器进行解释，也就是使用<code>java</code>命令。</p>
<p><strong>切记：java命令后不能跟文件的后缀。</strong></p>
<p><img src="https://upload-images.jianshu.io/upload_images/1694376-e7885ba3369b79eb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ20180411-115102@2x.png"></p>
<p>运行结果如下：<br><img src="https://upload-images.jianshu.io/upload_images/1694376-30d834e7001109bd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ20180411-115141@2x.png"></p>
<p>至此，使用记事本编写Java程序就完成了，主要熟悉最上面的一张图就OK了。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="liuxinixn.github.io/2018/04/11/Java-前言/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="雪晟">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://upload.jianshu.io/users/upload_avatars/1694376/4b7e25bd43ee.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="雪晟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/11/Java-前言/" itemprop="url">Java-前言</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-11T08:07:21+08:00">
                2018-04-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>概述</p>
</blockquote>
<p><code>Java</code>语言诞生于<code>1995</code>年，由<code>SUN</code>公司推出，<code>2009</code>被<code>ORAClE</code>公司收购。<br><code>Java</code>介绍：盗一张图如下</p>
<p><img src="https://upload-images.jianshu.io/upload_images/1694376-d8f468a50be325d3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ20180410-222702@2x.png"><br>基础是<code>Java SE</code>，更上层的有<code>JavaEE</code>，服务于企业，嵌入式开发<code>Java ME</code>，比如安卓手游等等。</p>
<p>何为<code>JVM</code>，英文名<code>Java Vitual Mechine</code> ，俗称虚拟机。</p>
<p>Java开发流程还是以一张图来解释，<img src="https://upload-images.jianshu.io/upload_images/1694376-b7a43ff6a58e92c9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ20180410-223438@2x.png"></p>
<p><code>Java</code>开发是把源文件为<code>.java</code>文件经过编译器（java C）指令编译，生成一堆二进制的<code>.class</code>字节码文件，这些文件与平台无关，这些文件经过解释器处理之才是我们的工程文件，而<code>JVM</code>就包含了解释器，这就是<code>JVM</code>使得<code>Java</code>能够跨平台的根源。</p>
<p>至于<code>JDK</code>，<code>JRE</code>，<code>JVM</code>三者之间的关系，还是一张图来说明：<br><img src="https://upload-images.jianshu.io/upload_images/1694376-e20f2aef5c9b1162.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ20180410-225132@2x.png"></p>
<blockquote>
<p>Java环境的搭建</p>
</blockquote>
<p>1、第一步，安装<code>JDK</code><br>下载地址：<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="noopener">JDK下载地址</a></p>
<p>选择对应的平台安装即可。<br><img src="https://upload-images.jianshu.io/upload_images/1694376-85687edd13d041ea.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ20180410-225544@2x.png"></p>
<p>2、配置环境变量<br><img src="https://upload-images.jianshu.io/upload_images/1694376-5e1f2025c8e15974.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ20180410-230026@2x.png"></p>
<p>下面以Mac系统为例</p>
<p>Mac 不同于Windows系统，下载好dmg后，直接安装。<br>首先查看，电脑上是否成功装了jdk。</p>
<p>在终端输入 <code>java -version</code><br>如果成功安装如下图：<br><img src="https://upload-images.jianshu.io/upload_images/1694376-c25890a7e6aef98c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ20180411-110951@2x.png"></p>
<p>按住opition键，选择系统的资源库，可以看到Java的安装路径。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/1694376-af8aa855214b0df6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ20180411-111145@2x.png"></p>
<p>安装好JDK之后，就可以配置环境变量了。</p>
<p>####第一种方式不建议，可以了解<br>首先，在终端输入 <code>sudo vim /etc/profile</code></p>
<p>如需要密码，就输入密码。按下shift +i，显示insert，进入输入模式。（注： 在终端输入  /usr/libexec/java_home  可以得到JAVA_HOME 的路径）</p>
<p>按照下面如图配置。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/1694376-0bf0771233c9ca8d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ20180411-112037@2x.png"></p>
<p>要想马上生效，输入 <code>source /etc/profile</code></p>
<p>运行profile配置。</p>
<p>最后检查环境。输入 <code>echo $JAVA_HOME</code></p>
<p>得到配置的路径，说明配置完毕。如图:<img src="https://upload-images.jianshu.io/upload_images/1694376-31870940a66a7825.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ20180411-112205@2x.png"></p>
<p>第二种：<br>补充：如果通过上面搭建的环境变量，后期在使用pod，fastlane时会有冲突，所以建议下面这种方式：<br>vi .bash_profile（使用vi编辑器打开）<br>open .bash_profile（使用文本编辑器打开）<br>touch .bash_profile（创建文件）</p>
<p>如果第一次创建bash_profile，就使用touch .bash_profile，然后打开编辑，如果已经有了，通过vi .bash_profile（使用vi编辑器打开）</p>
<p><img src="https://upload-images.jianshu.io/upload_images/1694376-06750d216ab84ae2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ20180507-165420@2x.png"></p>
<p>至此pod fastlane  都是可用的了。<br><img src="https://upload-images.jianshu.io/upload_images/1694376-6d123d2b95ce8c5c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ20180507-165529@2x.png"></p>
<p>至此，Mac版的Java环境已搭建好。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="liuxinixn.github.io/2018/04/09/iOS-仿微信扫一扫，相册识别二维码/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="雪晟">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://upload.jianshu.io/users/upload_avatars/1694376/4b7e25bd43ee.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="雪晟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/09/iOS-仿微信扫一扫，相册识别二维码/" itemprop="url">iOS 仿微信扫一扫，相册识别二维码</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-09T15:29:21+08:00">
                2018-04-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>前言</p>
</blockquote>
<p>扫一扫还是借助原生，原生扫描很强势，封装扫描工具类，闪光灯，扫描View,借助第三方照片选择器TZImagePickerController实现相册选中识别二维码。</p>
<blockquote>
<p>代码</p>
</blockquote>
<p>扫一扫使用方法：</p>
<p>1、配置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">self.scanManager = [LXQRCodeScanManager sharedManager];</div><div class="line"> NSArray *arr = @[AVMetadataObjectTypeQRCode, AVMetadataObjectTypeEAN13Code, AVMetadataObjectTypeEAN8Code, AVMetadataObjectTypeCode128Code];</div><div class="line"> // AVCaptureSessionPreset1920x1080 推荐使用，对于小型的二维码读取率较高</div><div class="line"> [_scanManager setupSessionPreset:AVCaptureSessionPreset1920x1080 metadataObjectTypes:arr currentController:self];`</div></pre></td></tr></table></figure></p>
<p>2、处理扫描结果回调 以及 光线对闪光灯的控制</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">  //扫描结果回调</div><div class="line">    [_scanManager scanResult:^(NSArray *metadataObjects) &#123;</div><div class="line">//        NSLog(@&quot;metadataObjects - - %@&quot;, metadataObjects);</div><div class="line">        </div><div class="line">        if (metadataObjects != nil &amp;&amp; metadataObjects.count &gt; 0) &#123;</div><div class="line">             [weakSelf.scanManager palySoundName:@&quot;sound.caf&quot;];</div><div class="line">             AVMetadataMachineReadableCodeObject *obj = metadataObjects[0];</div><div class="line">            NSString *url =[obj stringValue];</div><div class="line">           </div><div class="line">            LXQRResultController *Vc =[[LXQRResultController alloc]init];</div><div class="line">            Vc.navTitle = @&quot;扫描结果&quot;;</div><div class="line">            if ([url hasPrefix:@&quot;http&quot;]) &#123;</div><div class="line">                Vc.url = url;</div><div class="line">            &#125;</div><div class="line">            [weakSelf.navigationController pushViewController:Vc animated:YES];</div><div class="line">        </div><div class="line">        &#125; else &#123;</div><div class="line">            [NSObject showMessag:@&quot;暂未识别出扫描的二维码&quot; toView:weakSelf.view afterDelay:1];</div><div class="line">        &#125;</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    </div><div class="line">    //光线变化回调</div><div class="line">    [_scanManager brightnessChange:^(CGFloat brightness) &#123;</div><div class="line">        </div><div class="line">        [weakSelf.scanView lightBtnChangeWithBrightnessValue:brightness];</div><div class="line">        </div><div class="line">    &#125;];</div></pre></td></tr></table></figure>
<p>相册识别二维码跳转：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">#pragma mark---借助第三方相册</div><div class="line">- (void)rightBarButtonItenAction &#123;</div><div class="line">    </div><div class="line">  </div><div class="line">    TZImagePickerController *pickerController = [[TZImagePickerController alloc]initWithMaxImagesCount:1 delegate:self];</div><div class="line">    </div><div class="line">    WS(weakSelf);</div><div class="line">    </div><div class="line">    [pickerController setDidFinishPickingPhotosHandle:^(NSArray&lt;UIImage *&gt; *photo, NSArray *assets, BOOL isSelectOriginalPhoto)&#123;</div><div class="line">        </div><div class="line">//        NSLog(@&quot;%@&quot;,photo);</div><div class="line">        </div><div class="line">        UIImage *image = photo[0];</div><div class="line">        // CIDetector(CIDetector可用于人脸识别)进行图片解析，从而使我们可以便捷的从相册中获取到二维码</div><div class="line">        // 声明一个 CIDetector，并设定识别类型 CIDetectorTypeQRCode</div><div class="line">        CIDetector *detector = [CIDetector detectorOfType:CIDetectorTypeQRCode context:nil options:@&#123;CIDetectorAccuracy: CIDetectorAccuracyHigh&#125;];</div><div class="line">        </div><div class="line">        // 取得识别结果</div><div class="line">        NSArray *features = [detector featuresInImage:[CIImage imageWithCGImage:image.CGImage]];</div><div class="line">        </div><div class="line">        NSString *resultStr;</div><div class="line">        if (features.count == 0) &#123;</div><div class="line">            </div><div class="line">            [NSObject showMessag:@&quot;暂未识别出二维码&quot; toView:self.view afterDelay:1];</div><div class="line">        &#125;else&#123;</div><div class="line">            for (int index = 0; index &lt; [features count]; index ++) &#123;</div><div class="line">                CIQRCodeFeature *feature = [features objectAtIndex:index];</div><div class="line">                resultStr = feature.messageString;</div><div class="line">            &#125;</div><div class="line">            LXQRResultController *Vc =[[LXQRResultController alloc]init];</div><div class="line">            Vc.navTitle = @&quot;扫描结果&quot;;</div><div class="line">            if ([resultStr hasPrefix:@&quot;http&quot;]) &#123;</div><div class="line">                Vc.url = resultStr;</div><div class="line">            &#125;</div><div class="line">            [weakSelf.navigationController pushViewController:Vc animated:YES];</div><div class="line">      </div><div class="line">        &#125;</div><div class="line">        </div><div class="line">    &#125;];</div><div class="line">    [self presentViewController:pickerController animated:YES completion:nil];</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>最后</p>
</blockquote>
<p>效果图：<img src="https://upload-images.jianshu.io/upload_images/1694376-e0bcabc0bcad80d3.gif?imageMogr2/auto-orient/strip" alt="2018-04-09 15_13_59.gif"></p>
<p>demo地址：<a href="https://github.com/liuxinixn/LXQRCodeExample" target="_blank" rel="noopener">LXQRCode</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          
            <img class="site-author-image" itemprop="image"
              src="http://upload.jianshu.io/users/upload_avatars/1694376/4b7e25bd43ee.jpg"
              alt="雪晟" />
          
            <p class="site-author-name" itemprop="name">雪晟</p>
            <p class="site-description motion-element" itemprop="description">多去尝试你从未尝试的。</p>
        </div>

        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
            
              <a href="/archives/">
            
                <span class="site-state-item-count">112</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/liuxinixn" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>GitHub</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.jianshu.com/u/3d7c50f31b88" target="_blank" title="Jianshu">
                  
                    <i class="fa fa-fw fa-flag"></i>Jianshu</a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">雪晟</span>

  
</div>

<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>

  <div class="powered-by">由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动</div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">主题 &mdash; <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.2</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  









  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/three/three.min.js"></script>

  
  <script type="text/javascript" src="/lib/three/three-waves.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>


  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
