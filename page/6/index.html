<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="å¤šå»å°è¯•ä½ ä»æœªå°è¯•çš„ã€‚">
<meta property="og:type" content="website">
<meta property="og:title" content="é›ªæ™Ÿ">
<meta property="og:url" content="liuxinixn.github.io/page/6/index.html">
<meta property="og:site_name" content="é›ªæ™Ÿ">
<meta property="og:description" content="å¤šå»å°è¯•ä½ ä»æœªå°è¯•çš„ã€‚">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="é›ªæ™Ÿ">
<meta name="twitter:description" content="å¤šå»å°è¯•ä½ ä»æœªå°è¯•çš„ã€‚">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="liuxinixn.github.io/page/6/"/>





  <title>é›ªæ™Ÿ</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">é›ªæ™Ÿ</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">åå¹´é¥®å†°ï¼Œéš¾å‡‰çƒ­è¡€ã€‚æˆ‘æ˜¯é›ªæ™Ÿã€‚</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äº
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            å…¬ç›Š404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="liuxinixn.github.io/2017/06/01/ios--ç‰ˆæœ¬æ¯”è¾ƒ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="é›ªæ™Ÿ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://upload.jianshu.io/users/upload_avatars/1694376/4b7e25bd43ee.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é›ªæ™Ÿ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/01/ios--ç‰ˆæœ¬æ¯”è¾ƒ/" itemprop="url">iOS  --ç‰ˆæœ¬æ¯”è¾ƒ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-06-01T20:19:35+08:00">
                2017-06-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">#define currentVersion  [[NSBundle mainBundle] objectForInfoDictionaryKey:@&quot;CFBundleShortVersionString&quot;]</div><div class="line"></div><div class="line">#pragma mark--åˆ¤æ–­ç‰ˆæœ¬å·æ˜¯ä¸æ˜¯å¤§äºæœ¬åœ°ç‰ˆæœ¬</div><div class="line">-(BOOL)compareVesionWithServerVersion:(NSString *)version&#123;</div><div class="line">    NSArray *versionArray = [version componentsSeparatedByString:@&quot;.&quot;];//æœåŠ¡å™¨è¿”å›ç‰ˆ</div><div class="line">    NSArray *currentVesionArray = [currentVersion componentsSeparatedByString:@&quot;.&quot;];//å½“å‰ç‰ˆæœ¬</div><div class="line">    NSInteger a = (versionArray.count&gt; currentVesionArray.count)?currentVesionArray.count : versionArray.count;</div><div class="line">    </div><div class="line">    if ([version isEqualToString:currentVersion]) &#123;</div><div class="line">        return NO;</div><div class="line">    &#125;</div><div class="line">    for (int i = 0; i&lt; a; i++) &#123;</div><div class="line">        NSInteger a = [[versionArray objectAtIndex:i] integerValue];</div><div class="line">        NSInteger b = [[currentVesionArray objectAtIndex:i] integerValue];</div><div class="line">        if (a &gt; b) &#123;</div><div class="line">            //            NSLog(@&quot;æœ‰æ–°ç‰ˆæœ¬&quot;);</div><div class="line">            return YES;</div><div class="line">        &#125;else if(a &lt; b)&#123;</div><div class="line">            return NO;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    if (versionArray.count &gt; currentVesionArray.count) &#123;</div><div class="line">        return YES;</div><div class="line">    &#125;</div><div class="line">    if (versionArray.count &lt; currentVesionArray.count ) &#123;</div><div class="line">        return NO;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    return NO;</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="liuxinixn.github.io/2017/06/01/iOS-å‡ ç§å›¾ç‰‡æˆ–Gifå¼‚æ­¥åŠ è½½/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="é›ªæ™Ÿ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://upload.jianshu.io/users/upload_avatars/1694376/4b7e25bd43ee.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é›ªæ™Ÿ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/01/iOS-å‡ ç§å›¾ç‰‡æˆ–Gifå¼‚æ­¥åŠ è½½/" itemprop="url">iOS -å‡ ç§å›¾ç‰‡æˆ–Gifå¼‚æ­¥åŠ è½½</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-06-01T20:19:35+08:00">
                2017-06-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>iOS åŠ è½½åŠ è½½å›¾ç‰‡çš„æ–¹å¼ä¸»æµçš„æœ‰ä¸¤ç§ï¼ˆæœ¬åœ°å›¾ç‰‡ç•¥è¿‡ï¼‰ï¼š<br>1ã€SDWebImageã€‚<br>2ã€YYWebImageã€‚</p>
<p>######åŒºåˆ«ï¼šä¸»æµæ¡†æ¶ä¸»è¦ä½¿ç”¨SDWebImageè¿›è¡Œå¤„ç†å›¾ç‰‡ï¼Œè¿™ç‚¹ä¸ç”¨è¯´æ˜ï¼Œä½†æ˜¯SDWebImageåœ¨å¤„ç†Gifçš„æ—¶å€™ä¸æ˜¯å¾ˆå‹å¥½ï¼Œåœ¨githubä¸ŠSDWebImage æ˜¯è¿™æ ·è¯´æ˜çš„ï¼Œéœ€è¦é¢å¤–pod â€˜SDWebImage/Gifâ€™.<br><img src="http://upload-images.jianshu.io/upload_images/1694376-7df605e3a582d996.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="æç¤º.png"></p>
<p>é™„ä¸Šåœ°å€ï¼š<a href="https://github.com/Flipboard/FLAnimatedImage" target="_blank" rel="noopener">FLAnimatedImage</a></p>
<p>FLAnimatedImage åŠ è½½ç½‘ç»œGIFæ–¹æ³•:</p>
<p><code>cell.icon1.animatedImage =[[FLAnimatedImage alloc]initWithAnimatedGIFData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@&quot;http://images2015.cnblogs.com/blog/607542/201601/607542-20160123090832343-133952004.gif&quot;]]];</code><br>icon çš„ç±»å‹æ˜¯<code>FLAnimatedImageView</code>ï¼›</p>
<p>æ‰€ä»¥çœ‹å¾—å‡ºæ¥SDWebImageåœ¨æ”¯æŒGifå¤„ç†ä¸æ˜¯å¾ˆå¥½ã€‚</p>
<p>æ¥ä¸‹æ¥ç®€å•ä»‹ç»ä¸€ä¸‹YYWebImageï¼š</p>
<p>YYWebImage æ˜¯ä¸€ä¸ªå¼‚æ­¥å›¾ç‰‡åŠ è½½æ¡†æ¶ (YYKit ç»„ä»¶ä¹‹ä¸€).<br>å…¶è®¾è®¡ç›®çš„æ˜¯è¯•å›¾æ›¿ä»£ SDWebImageã€PINRemoteImageã€FLAnimatedImage ç­‰å¼€æºæ¡†æ¶ï¼Œå®ƒæ”¯æŒè¿™äº›å¼€æºæ¡†æ¶çš„å¤§éƒ¨åˆ†åŠŸèƒ½ï¼ŒåŒæ—¶å¢åŠ äº†å¤§é‡æ–°ç‰¹æ€§ã€å¹¶ä¸”æœ‰ä¸å°çš„æ€§èƒ½æå‡ã€‚<br>å®ƒåº•å±‚ç”¨ YYCache å®ç°äº†å†…å­˜å’Œç£ç›˜ç¼“å­˜, ç”¨ YYImage å®ç°äº† WebP/APNG/GIF åŠ¨å›¾çš„è§£ç å’Œæ’­æ”¾ã€‚ä½ å¯ä»¥æŸ¥çœ‹è¿™äº›é¡¹ç›®ä»¥è·å¾—æ›´å¤šä¿¡æ¯ã€‚</p>
<p>å¼‚æ­¥çš„å›¾ç‰‡åŠ è½½ï¼Œæ”¯æŒ HTTP å’Œæœ¬åœ°æ–‡ä»¶ã€‚<br>æ”¯æŒ GIFã€APNGã€WebP åŠ¨ç”»ï¼ˆåŠ¨æ€ç¼“å­˜ï¼Œä½å†…å­˜å ç”¨ï¼‰ã€‚<br>æ”¯æŒé€è¡Œæ‰«æã€éš”è¡Œæ‰«æã€æ¸è¿›å¼å›¾åƒåŠ è½½ã€‚<br>UIImageViewã€UIButtonã€MKAnnotationViewã€CALayer çš„ Category æ–¹æ³•æ”¯æŒã€‚<br>å¸¸è§å›¾ç‰‡å¤„ç†ï¼šæ¨¡ç³Šã€åœ†è§’ã€å¤§å°è°ƒæ•´ã€è£åˆ‡ã€æ—‹è½¬ã€è‰²è°ƒç­‰ã€‚<br>é«˜æ€§èƒ½çš„å†…å­˜å’Œç£ç›˜ç¼“å­˜ã€‚<br>é«˜æ€§èƒ½çš„å›¾ç‰‡è®¾ç½®æ–¹å¼ï¼Œä»¥é¿å…ä¸»çº¿ç¨‹é˜»å¡ã€‚<br>æ¯ä¸ªç±»å’Œæ–¹æ³•éƒ½æœ‰å®Œå–„çš„æ–‡æ¡£æ³¨é‡Šã€‚</p>
<p>ä» URL åŠ è½½å›¾ç‰‡ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// åŠ è½½ç½‘ç»œå›¾ç‰‡</div><div class="line">imageView.yy_imageURL = [NSURL URLWithString:@&quot;http://github.com/logo.png&quot;];</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// åŠ è½½æœ¬åœ°å›¾ç‰‡</div><div class="line">imageView.yy_imageURL = [NSURL fileURLWithPath:@&quot;/tmp/logo.png&quot;];</div></pre></td></tr></table></figure>
<p>åŠ è½½åŠ¨å›¾<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">// åªéœ€è¦æŠŠ `UIImageView` æ›¿æ¢ä¸º `YYAnimatedImageView` å³å¯ã€‚</div><div class="line">UIImageView *imageView = [YYAnimatedImageView new];</div><div class="line">imageView.yy_imageURL = [NSURL URLWithString:@&quot;http://github.com/ani.webp&quot;];</div></pre></td></tr></table></figure></p>
<p>æ¸è¿›å¼å›¾ç‰‡åŠ è½½<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">// æ¸è¿›å¼ï¼šè¾¹ä¸‹è½½è¾¹æ˜¾ç¤º</div><div class="line">[imageView yy_setImageWithURL:url options:YYWebImageOptionProgressive];</div><div class="line">	</div><div class="line">// æ¸è¿›å¼åŠ è½½ï¼Œå¢åŠ æ¨¡ç³Šæ•ˆæœå’Œæ¸å˜åŠ¨ç”» ï¼ˆè§æœ¬é¡µæœ€ä¸Šæ–¹çš„GIFæ¼”ç¤ºï¼‰</div><div class="line"></div><div class="line">[imageView yy_setImageWithURL:url options:YYWebImageOptionProgressiveBlur ï½œ YYWebImageOptionSetImageWithFadeAnimation];</div></pre></td></tr></table></figure></p>
<p>åŠ è½½ã€å¤„ç†å›¾ç‰‡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">// 1. ä¸‹è½½å›¾ç‰‡</div><div class="line">// 2. è·å¾—å›¾ç‰‡ä¸‹è½½è¿›åº¦</div><div class="line">// 3. è°ƒæ•´å›¾ç‰‡å¤§å°ã€åŠ åœ†è§’</div><div class="line">// 4. æ˜¾ç¤ºå›¾ç‰‡æ—¶å¢åŠ ä¸€ä¸ªæ·¡å…¥åŠ¨ç”»ï¼Œä»¥è·å¾—æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ</div><div class="line">	</div><div class="line">[imageView yy_setImageWithURL:url</div><div class="line">   placeholder:nil</div><div class="line">   options:YYWebImageOptionSetImageWithFadeAnimation</div><div class="line">   progress:^(NSInteger receivedSize, NSInteger expectedSize) &#123;</div><div class="line">       progress = (float)receivedSize / expectedSize;</div><div class="line">   &#125;</div><div class="line">   transform:^UIImage *(UIImage *image, NSURL *url) &#123;</div><div class="line">       image = [image yy_imageByResizeToSize:CGSizeMake(100, 100) contentMode:UIViewContentModeCenter];</div><div class="line">       return [image yy_imageByRoundCornerRadius:10];</div><div class="line">   &#125;</div><div class="line">   completion:^(UIImage *image, NSURL *url, YYWebImageFromType from, YYWebImageStage stage, NSError *error) &#123;</div><div class="line">       if (from == YYWebImageFromDiskCache) &#123;</div><div class="line">           NSLog(@&quot;load from disk cache&quot;);</div><div class="line">       &#125;</div><div class="line">   &#125;];</div></pre></td></tr></table></figure>
<p>å›¾ç‰‡ç¼“å­˜<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">YYImageCache *cache = [YYWebImageManager sharedManager].cache;</div><div class="line">    </div><div class="line">// è·å–ç¼“å­˜å¤§å°</div><div class="line">cache.memoryCache.totalCost;</div><div class="line">cache.memoryCache.totalCount;</div><div class="line">cache.diskCache.totalCost;</div><div class="line">cache.diskCache.totalCount;</div><div class="line">    </div><div class="line">// æ¸…ç©ºç¼“å­˜</div><div class="line">[cache.memoryCache removeAllObjects];</div><div class="line">[cache.diskCache removeAllObjects];</div><div class="line">    </div><div class="line">// æ¸…ç©ºç£ç›˜ç¼“å­˜ï¼Œå¸¦è¿›åº¦å›è°ƒ</div><div class="line">[cache.diskCache removeAllObjectsWithProgressBlock:^(int removedCount, int totalCount) &#123;</div><div class="line">   // progress</div><div class="line">&#125; endBlock:^(BOOL error) &#123;</div><div class="line">   // end</div><div class="line">&#125;];</div></pre></td></tr></table></figure></p>
<p>å…³äºYYWebImage åŠ è½½GIFè¡¥å……ä¸€ç‚¹ï¼Œå¦‚æœæ˜¯åŠ è½½æœ¬åœ°Gif:<br><code>YYImage *image = [YYImage imageNamed:name];
YYAnimatedImageView *imageView = [[YYAnimatedImageView alloc] initWithImage:image];</code></p>
<p>åŠ è½½ç½‘ç»œGifï¼š<br>ç®€å•ä»‹ç»ä¸¤ç§ï¼š<br>1ã€åŒæ­¥æ–¹æ³•ï¼Œä¼šå¡é¡¿ï¼ˆFLAnimatedImageåœ¨å¤„ç†çš„æ—¶å€™å¡é¡¿ä¼šå¥½å¾ˆå¤šï¼Œå¾ˆæµç•…ï¼‰ã€‚<br><code>imageView.yy_imageURL = [NSURL URLWithString:@&quot;http://upload-images.jianshu.io/upload_images/1694376-b9646eecf2139f87.gif&quot;];</code><br>2ã€å¼‚æ­¥æ–¹æ³•ï¼š<br>```<br>imageView yy_setImageWithURL:[NSURL URLWithString:@â€<a href="http://i.imgur.com/8KHKhxI.gif" target="_blank" rel="noopener">http://i.imgur.com/8KHKhxI.gif</a>â€œ]<br>                          placeholder:nil<br>                              options:YYWebImageOptionProgressiveBlur | YYWebImageOptionShowNetworkActivity | YYWebImageOptionSetImageWithFadeAnimation<br>                             progress:^(NSInteger receivedSize, NSInteger expectedSize) {<br>                                 if (expectedSize &gt; 0 &amp;&amp; receivedSize &gt; 0) {</p>
<pre><code>      }
  }
 transform:nil
completion:^(UIImage *image, NSURL *url, YYWebImageFromType from, YYWebImageStage stage, NSError *error) {

    NSLog(@&quot;%ld&quot;,stage);
}];
</code></pre><p>`</p>
<p>æ€»ç»“ï¼š<br>1ã€å•ç‹¬åŠ è½½ç½‘ç»œå›¾ç‰‡SDWebImageåŸºæœ¬ç¬¦åˆå¸¸ç”¨éœ€æ±‚ã€‚<br>2ã€FLAnimatedImageåœ¨å¤„ç†Gifçš„æ—¶å€™å¾ˆæµç•…ã€‚è‡³äºSDWebImageé…åˆFLAnimatedImageæš‚æ—¶æ²¡æœ‰å‘ç°ï¼Œå®˜ç½‘demoçš„äº‹ä¾‹å¯ä»¥å‚è€ƒä¸€ä¸‹ã€‚FLAnimatedImageåˆ°æ˜¯å¯ä»¥å•ç‹¬åŠ è½½Gifã€‚<br>3ã€YYWebImage å¯ä»¥åŠ è½½ç½‘ç»œå›¾ç‰‡ä»¥åŠè‰¯å¥½çš„æ”¯æŒGifï¼Œå¯ä»¥è‡ªå®šä¹‰å¤šç§è¿‡æ¸¡æ•ˆæœã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="liuxinixn.github.io/2017/06/01/å¦‚ä½•å»ºç«‹è‡ªå·±çš„å…¬æœ‰pod/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="é›ªæ™Ÿ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://upload.jianshu.io/users/upload_avatars/1694376/4b7e25bd43ee.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é›ªæ™Ÿ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/01/å¦‚ä½•å»ºç«‹è‡ªå·±çš„å…¬æœ‰pod/" itemprop="url">å¦‚ä½•å»ºç«‹è‡ªå·±çš„å…¬æœ‰pod</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-06-01T20:19:35+08:00">
                2017-06-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>å¦‚æœåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæƒ³æŠŠè‡ªå·±å°è£…çš„ä¸€äº›æ§ä»¶ã€åˆ†ç±»æ‰“åŒ…ä»¥podçš„å½¢å¼ä¾›è‡ªå·±æˆ–å›¢é˜Ÿä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥å»ºç«‹å…¬æœ‰podæˆ–è€…ç§æœ‰podã€‚</p>
<p>ä»¥ä¸‹æŒ‡ç¤ºä»‹ç»å¦‚ä½•æ‰“åŒ…å…¬æœ‰podä¾›è‡ªå·±ä½¿ç”¨ã€‚</p>
<blockquote>
<p>æ­¥éª¤ 1.<br>å‰å¾€githupå»ºç«‹åº“ã€‚</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/1694376-d7e7f537ab28dbb1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="cocoapods.png"></p>
<p>é€‰æ‹©MIT è®¤è¯ï¼ˆå¾—åˆ°cocopodsçš„è®¤è¯è®¸å¯ã€‚ï¼‰</p>
<p>æ¥ä¸‹æ¥æŠŠä½ éœ€è¦çš„ä¸Šä¼ çš„å·¥å…·ç±»æ”¾åˆ°ç›®å½•ä¸‹ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/1694376-49d5f9fa7964dff8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ç›®å½•.png"></p>
<blockquote>
<p>æ­¥éª¤äºŒï¼š</p>
</blockquote>
<p>åˆ›å»º<code>.podspec</code>æ–‡ä»¶ã€‚<br>LXUtils æ˜¯ä½ æ–°å»ºåº“çš„åå­—ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">podÂ specÂ create LXUtils</div></pre></td></tr></table></figure></p>
<p>æ‰§è¡Œå®Œä¸Šé¢çš„å‘½ä»¤ï¼Œä¼šç”Ÿæˆä¸€ä¸ª<code>.podspec</code>çš„æ–‡ä»¶ã€‚</p>
<p>å¯ä»¥ç¼–è¾‘æ‰“å¼€ï¼Œæˆ‘æ˜¯é€šè¿‡webStormæ‰“å¼€çš„ï¼ˆä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œé€šè¿‡é»˜è®¤çš„ç¼–è¾‘å™¨æ‰“å¼€åé¢è¿›è¡Œspecæ–‡ä»¶éªŒè¯çš„æ—¶å€™ç»å¸¸æç¤ºè¯­æ³•é”™è¯¯ï¼Œæ‰€ä»¥å»ºè®®è¿˜æ˜¯é€šè¿‡å·¥å…·æ‰“å¼€å§ï¼‰ï¼š</p>
<p>æœ€å¥½è¿˜æ˜¯æ ¹æ®é‡Œé¢çš„ä¿®æ”¹ã€‚<strong>åˆ‡è®°tagé€‰é¡¹å‰é¢å¿…é¡»æ·»åŠ v</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">s.name         = &quot;LXUtils&quot;</div><div class="line"> s.version      = &quot;0.0.1&quot;</div><div class="line"> s.summary      = &quot;common tools on iOS.&quot;</div><div class="line">s.description  = &lt;&lt;-DESC</div><div class="line">                common tool and category on iOS</div><div class="line">                   DESC</div><div class="line">  s.homepage     = &quot;https://github.com/liuxinixn/LXUtils&quot;</div><div class="line">s.license      = &quot;MIT&quot;</div><div class="line"> s.author             = &#123; &quot;missæ&quot; =&gt; &quot;missli_211@163.com&quot; &#125;</div><div class="line">s.platform     = :ios, &quot;8.0&quot;</div><div class="line"></div><div class="line">s.source       = &#123; :git =&gt; &quot;https://github.com/liuxinixn/LXUtils.git&quot;, :tag =&gt; &quot;v#&#123;s.version&#125;&quot; &#125;</div><div class="line"></div><div class="line">s.source_files  = &quot;LXUtils&quot;, &quot;LXUtils/**/*.&#123;h,m&#125;&quot;</div><div class="line">s.framework  = &quot;UIKit&quot;</div><div class="line">  s.requires_arc = true</div></pre></td></tr></table></figure></p>
<p>ä¿®æ”¹å¥½å¯¹åº”çš„é€‰é¡¹ä¹‹åï¼ŒéªŒè¯specæ–‡ä»¶çš„åˆæ³•æ€§ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod lib lint LXUtils.podspec</div></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/1694376-2451430d50684d6f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="éªŒè¯.png"></p>
<blockquote>
<p>æ­¥éª¤3.</p>
</blockquote>
<p>ç»‘å®štagï¼Œç„¶åå‘å¸ƒã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git tag &apos;0.0.1&apos;  </div><div class="line">git push --tags  </div><div class="line">git push origin master</div></pre></td></tr></table></figure>
<p>ä¸‹é¢çš„å‘½ä»¤éœ€è¦ä½ å»é‚®ç®±è¿›è¡ŒéªŒè¯<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod trunk register jiushu0228@163.com &apos;LXUtils&apos;</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod trunk me</div></pre></td></tr></table></figure>
<p>éªŒè¯ç»“æœ<br><img src="http://upload-images.jianshu.io/upload_images/1694376-ab447eea62a47b42.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="é‚®ç®±éªŒè¯.png"></p>
<p>å¦‚æœå‡ºç°ä¸‹é¢çš„é—®é¢˜ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[!] The spec did not pass validation, due to 1 error.</div><div class="line">[!] The validator for Swift projects uses Swift 3.0 by default, if you are using a different version of swift you can use a `.swift-version` file to set the version for your Pod. For example to use Swift 2.3, run: </div><div class="line">    `echo &quot;2.3&quot; &gt; .swift-version`.</div></pre></td></tr></table></figure></p>
<p>æ‰§è¡Œ<code>echo &quot;2.3&quot; &gt; .swift-version</code>å³å¯ã€‚</p>
<p>æœ€åä¸€æ­¥ï¼Œå‘å¸ƒspecåˆ°cocoapods</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod trunk push LXUtils.podspec</div></pre></td></tr></table></figure>
<p>æˆåŠŸåå¦‚ä¸‹:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">zhongzhideMini:LXUtils chenergou$ pod trunk push LXUtils.podspec</div><div class="line">Updating spec repo `master`</div><div class="line"></div><div class="line">CocoaPods 1.3.0.beta.3 is available.</div><div class="line">To update use: `sudo gem install cocoapods --pre`</div><div class="line">[!] This is a test version we&apos;d love you to try.</div><div class="line"></div><div class="line">For more information, see https://blog.cocoapods.org and the CHANGELOG for this version at https://github.com/CocoaPods/CocoaPods/releases/tag/1.3.0.beta.3</div><div class="line"></div><div class="line">Validating podspec</div><div class="line"> -&gt; LXUtils (0.0.1)</div><div class="line"></div><div class="line">Updating spec repo `master`</div><div class="line"></div><div class="line">CocoaPods 1.3.0.beta.3 is available.</div><div class="line">To update use: `sudo gem install cocoapods --pre`</div><div class="line">[!] This is a test version we&apos;d love you to try.</div><div class="line"></div><div class="line">For more information, see https://blog.cocoapods.org and the CHANGELOG for this version at https://github.com/CocoaPods/CocoaPods/releases/tag/1.3.0.beta.3</div><div class="line"></div><div class="line"></div><div class="line">--------------------------------------------------------------------------------</div><div class="line"> ğŸ‰  Congrats</div><div class="line"></div><div class="line"> ğŸš€  LXUtils (0.0.1) successfully published</div><div class="line"> ğŸ“…  November 8th, 02:45</div><div class="line"> ğŸŒ  https://cocoapods.org/pods/LXUtils</div><div class="line"> ğŸ‘  Tell your friends!</div></pre></td></tr></table></figure></p>
<blockquote>
<p>è¡¥å……</p>
</blockquote>
<p>æäº¤åéœ€è¦ç­‰ä¸€æ®µæ—¶é—´ï¼Œå¦‚æœæœä¸åˆ°è¯•è¯•ä¸‹é¢çš„æ–¹æ³•ï¼š<br>æ ¹æ®è·¯å¾„<code>~/Library/Caches/CocoaPods/search_index.json</code>æ‰¾åˆ°è¿™ä¸ªjsonæ–‡ä»¶ï¼Œç„¶ååˆ é™¤å³å¯ã€‚</p>
<p>é‡æ–°â€™pod search LXUtilsâ€™</p>
<p><code>è¾“å‡ºï¼šCreating search index for spec repo &#39;master&#39;.. Done!ï¼Œç¨ç­‰ç‰‡åˆ»å°±ä¼šå‡ºç°æ‰€æœ‰å¸¦RxSwiftå­—æ®µçš„ç±»åº“å‡ºç°ã€‚</code></p>
<blockquote>
<p>å¦‚ä½•æ›´æ–°pod</p>
</blockquote>
<p>1.å‡çº§ç‰ˆæœ¬</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git tag &apos;v0.0.2&apos;  </div><div class="line">git push --tags  </div><div class="line">git push origin master</div></pre></td></tr></table></figure>
<p>2.æ›´æ–°åˆ°cocoapods<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod trunk push LXUtils.podspec</div></pre></td></tr></table></figure></p>
<p>æˆåŠŸä¹‹åï¼Œå¦‚æœæœç´¢ä¸åˆ°æ‰§è¡Œ<code>pod setup</code></p>
<p>```</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="liuxinixn.github.io/2017/05/01/å°è£…ä¸€ä¸ªUINavgationBarçš„æ¸å˜æ•ˆæœ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="é›ªæ™Ÿ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://upload.jianshu.io/users/upload_avatars/1694376/4b7e25bd43ee.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é›ªæ™Ÿ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/01/å°è£…ä¸€ä¸ªUINavgationBarçš„æ¸å˜æ•ˆæœ/" itemprop="url">iOS å°è£…ä¸€ä¸ªUINavgationBarçš„æ¸å˜æ•ˆæœ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-05-01T20:19:35+08:00">
                2017-05-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æ•ˆæœå›¾ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/1694376-576161be9612864e.gif?imageMogr2/auto-orient/strip" alt="æ»šåŠ¨æ¸å˜NavBar.gif"></p>
<p>åœ¨æœ‰UIScrollviewçš„é¡µé¢ä¸­ï¼Œåšä¸€ä¸ªNavBar çš„æ¸å˜è¿‡æ¸¡ï¼Œæœ€å¥½è¿˜æ˜¯æŠ½å–å‡ºæ¥ã€‚</p>
<p>ä½¿ç”¨æ–¹æ³•,éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¢å¤navbarçš„é¢œè‰²æœ€å¥½æ˜¯æ”¾åœ¨viewDidDisappearä¸­ï¼Œå¦åˆ™ä¾§æ»‘è¿”å›çš„æ—¶å€™ï¼ŒNavbarçš„é¢œè‰²ä¼šå‡ºç°é—®é¢˜ã€‚æ¸å˜çš„å¤„ç†ï¼Œå°±æ˜¯æŠŠUIScrollviewä¼ ç»™å·¥å…·ç±»å³å¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">-(void)viewDidDisappear:(BOOL)animated&#123;</div><div class="line">    [super viewDidDisappear:animated];</div><div class="line">    [LXGradientNavManager resStoreToDefaultNavigationBar];</div><div class="line"></div><div class="line">&#125;</div><div class="line">- (void)viewDidLoad &#123;</div><div class="line">    [super viewDidLoad];</div><div class="line">    // Do any additional setup after loading the view.</div><div class="line">    </div><div class="line">    </div><div class="line">    [self setUp];</div><div class="line">    </div><div class="line">    [LXGradientNavManager managerWithController:self];</div><div class="line">    </div><div class="line">    [LXGradientNavManager setOrignColor:[UIColor clearColor]];</div><div class="line">    </div><div class="line">    [LXGradientNavManager setZeroAlphaOffset:0];</div><div class="line">    [LXGradientNavManager setFullAlphaOffset:self.tableView.tableHeaderView.height];</div><div class="line">    [LXGradientNavManager setDefaultColor:[UIColor hexStringToColor:@&quot;F9F9F9&quot;]];</div><div class="line">    </div><div class="line">&#125;</div><div class="line">-(void)scrollViewDidScroll:(UIScrollView *)scrollView&#123;</div><div class="line">    [LXGradientNavManager dealGradientWithScrollView:scrollView];</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>å·¥å…·ç±»å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">#import &lt;Foundation/Foundation.h&gt;</div><div class="line">#import &lt;UIKit/UIKit.h&gt;</div><div class="line">@interface LXGradientNavManager : NSObject</div><div class="line">@property(nonatomic,strong)UIColor *defaultColor; //é»˜è®¤çš„Navçš„é¢œè‰²</div><div class="line"></div><div class="line">@property(nonatomic,strong)UIColor *orignColor; //æœ€å¼€å§‹çš„é¢œè‰²</div><div class="line"></div><div class="line">@property(nonatomic,assign)float zeroAlphaOffset;</div><div class="line"></div><div class="line">@property (nonatomic, assign) float fullAlphaOffset;</div><div class="line"></div><div class="line">+(void)setOrignColor:(UIColor *)color;</div><div class="line"></div><div class="line">+ (void)setDefaultColor:(UIColor *)color;</div><div class="line"></div><div class="line">+ (void)setZeroAlphaOffset:(float)offset;</div><div class="line"></div><div class="line">+ (void)setFullAlphaOffset:(float)offset;</div><div class="line"></div><div class="line"></div><div class="line">+(void)managerWithController:(UIViewController *)viewController;</div><div class="line"></div><div class="line">+(void)dealGradientWithScrollView:(UIScrollView *)scrollView;</div><div class="line"></div><div class="line">+(void)reStoreToSystemNavigationBar; //change the navigationBar to system style</div><div class="line"></div><div class="line">+(void)resStoreToDefaultNavigationBar; //æ¢å¤åˆ°é»˜è®¤çš„navbar</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div></pre></td><td class="code"><pre><div class="line">#import &quot;LXGradientNavManager.h&quot;</div><div class="line"></div><div class="line">@interface LXGradientNavManager()</div><div class="line">@property (nonatomic, strong) UINavigationBar *selfNavigationBar;</div><div class="line">@property (nonatomic, strong) UINavigationController *selfNavigationController;</div><div class="line">@end</div><div class="line">@implementation LXGradientNavManager</div><div class="line">+(LXGradientNavManager *)sharedManager&#123;</div><div class="line">    </div><div class="line">    static LXGradientNavManager *manager = nil;</div><div class="line">    static dispatch_once_t onceToken;</div><div class="line">    dispatch_once(&amp;onceToken, ^&#123;</div><div class="line">        manager = [[LXGradientNavManager alloc]init];</div><div class="line">    &#125;);</div><div class="line">    return manager;</div><div class="line">&#125;</div><div class="line"></div><div class="line">+(void)managerWithController:(UIViewController *)viewController&#123;</div><div class="line">    </div><div class="line">    if (viewController.navigationController) &#123;</div><div class="line">        UINavigationBar *navigationBar = viewController.navigationController.navigationBar;</div><div class="line">        [self sharedManager].selfNavigationBar = navigationBar;</div><div class="line">        [self sharedManager].selfNavigationController = viewController.navigationController;</div><div class="line">        [navigationBar setBackgroundImage:[UIImage new] forBarMetrics:UIBarMetricsDefault];</div><div class="line">        [navigationBar setShadowImage:[UIImage new]];</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">+(void)dealGradientWithScrollView:(UIScrollView *)scrollView&#123;</div><div class="line">    CGFloat y = scrollView.contentOffset.y;</div><div class="line">    </div><div class="line">    UIColor *defaultColor = [self sharedManager].defaultColor;</div><div class="line"></div><div class="line">    if (y &gt; [self sharedManager].fullAlphaOffset) &#123;</div><div class="line">        UIImage *image =[self imageWithColor:defaultColor];</div><div class="line"></div><div class="line">        [[self sharedManager].selfNavigationBar setBackgroundImage:image forBarMetrics:UIBarMetricsDefault];</div><div class="line">    &#125;else&#123;</div><div class="line">        CGFloat alpha = y /[self sharedManager].fullAlphaOffset;</div><div class="line">        UIImage *image =[self imageWithColor: [defaultColor colorWithAlphaComponent:alpha]];</div><div class="line">        [[self sharedManager].selfNavigationBar setBackgroundImage:image forBarMetrics:UIBarMetricsDefault];</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (void)reStoreToSystemNavigationBar &#123;</div><div class="line">    [[self sharedManager].selfNavigationController setValue:[UINavigationBar new] forKey:@&quot;navigationBar&quot;];</div><div class="line">&#125;</div><div class="line">+ (void)resStoreToDefaultNavigationBar&#123;</div><div class="line">    UIImage *image =[self imageWithColor:[self sharedManager].defaultColor];</div><div class="line"></div><div class="line">    [[self sharedManager].selfNavigationBar setBackgroundImage:image forBarMetrics:UIBarMetricsDefault];</div><div class="line">&#125;</div><div class="line">+(void)setZeroAlphaOffset:(float)offset&#123;</div><div class="line">    [self sharedManager].zeroAlphaOffset = offset;</div><div class="line">    </div><div class="line">&#125;</div><div class="line">+(void)setFullAlphaOffset:(float)offset&#123;</div><div class="line">    [self sharedManager].fullAlphaOffset = offset;</div><div class="line">&#125;</div><div class="line">+(void)setDefaultColor:(UIColor *)color&#123;</div><div class="line">    [self sharedManager].defaultColor = color;</div><div class="line">    </div><div class="line">   </div><div class="line">    </div><div class="line">&#125;</div><div class="line">+(void)setOrignColor:(UIColor *)color&#123;</div><div class="line">    [self sharedManager].orignColor = color;</div><div class="line">    </div><div class="line">    [[self sharedManager].selfNavigationBar setBackgroundImage:[self imageWithColor:color] forBarMetrics:UIBarMetricsDefault];</div><div class="line">    </div><div class="line"></div><div class="line">    </div><div class="line">&#125;</div><div class="line">+ (UIImage *)imageWithColor:(UIColor *)color &#123;</div><div class="line">    CGRect rect = CGRectMake(0, 0, 1, 1);</div><div class="line">    UIGraphicsBeginImageContext(rect.size);</div><div class="line">    CGContextRef context = UIGraphicsGetCurrentContext();</div><div class="line">    [color setFill];</div><div class="line">    CGContextFillRect(context, rect);</div><div class="line">    UIImage *imgae = UIGraphicsGetImageFromCurrentImageContext();</div><div class="line">    UIGraphicsEndImageContext();</div><div class="line">    return imgae;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>å…³äº UIScrollviewçš„èµ·å§‹åç§»é‡ï¼Œæœ€å¥½è¿˜æ˜¯å¤„ç†å¦‚ä¸‹ã€‚</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">self.view.backgroundColor =[UIColor whiteColor];</div><div class="line">   self.extendedLayoutIncludesOpaqueBars = YES;</div><div class="line">   self.automaticallyAdjustsScrollViewInsets = NO;</div></pre></td></tr></table></figure>
<p>ä¼šä¿è¯èµ·å§‹ç‚¹ä¸ä¼šåç§»ã€‚ </p>
<p>demoåœ°å€ï¼š<a href="https://github.com/liuxinixn/LXGradientNavView" target="_blank" rel="noopener">æ»šåŠ¨æ¸å˜NavBar</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="liuxinixn.github.io/2017/04/28/å°è£…ä¸€ä¸ªä¸‹æ‹‰ä¸€ä½“æ•ˆæœ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="é›ªæ™Ÿ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://upload.jianshu.io/users/upload_avatars/1694376/4b7e25bd43ee.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é›ªæ™Ÿ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/28/å°è£…ä¸€ä¸ªä¸‹æ‹‰ä¸€ä½“æ•ˆæœ/" itemprop="url">iOSå°è£…ä¸€ä¸ªä¸‹æ‹‰ä¸€ä½“æ•ˆæœ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-04-28T20:19:35+08:00">
                2017-04-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://upload-images.jianshu.io/upload_images/1694376-a410f3eb3482518a.gif?imageMogr2/auto-orient/strip" alt="ä¸‹æ‹‰ä¸€ä½“â€˜.gif"></p>
<p>ä¸‹æ‹‰ä¸€ä½“æ•ˆæœï¼Œæ˜¯åˆ©ç”¨tableviewçš„contentInsetã€‚æŠŠviewæ·»åŠ åˆ°tableviewä¸Šï¼Œæ ¹æ®scrollviewçš„æ»šåŠ¨å®ç°å³å¯ã€‚<br>æ‰€ä»¥å¯ä»¥å°è£…ä¸€ä¸ªä¸€åŠ³æ°¸é€¸ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">#import &lt;Foundation/Foundation.h&gt;</div><div class="line">#import &lt;UIKit/UIKit.h&gt;</div><div class="line"></div><div class="line">@interface PullDownZoom : NSObject</div><div class="line">-(instancetype)initWithTableview:(UIScrollView *)tableview headerH:(CGFloat)headerH header:(UIView *)header;</div><div class="line"></div><div class="line">-(void)scrollZoom;</div><div class="line">@end</div></pre></td></tr></table></figure>
<p>ä¼ å…¥tableview ä¸éœ€è¦ä¸‹æ‹‰çš„viewï¼Œä»¥åŠå¯¹åº”çš„é«˜åº¦,å¤„ç†å¦‚ä¸‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">#import &quot;PullDownZoom.h&quot;</div><div class="line">#import &quot;UIView+Frame.h&quot;</div><div class="line">@interface PullDownZoom()&lt;UIScrollViewDelegate&gt;</div><div class="line">@property(nonatomic,strong)UIScrollView *tableview;</div><div class="line">@property(nonatomic,assign)CGFloat headerH;</div><div class="line">@property(nonatomic,strong)UIView *header;</div><div class="line">@end</div><div class="line">@implementation PullDownZoom</div><div class="line">-(instancetype)initWithTableview:(UIScrollView *)tableview headerH:(CGFloat)headerH header:(UIView *)header</div><div class="line">&#123;</div><div class="line">    </div><div class="line">    self = [super init];</div><div class="line">    if (self) &#123;</div><div class="line">        self.tableview = tableview;</div><div class="line">        </div><div class="line">      </div><div class="line">        self.tableview.delegate = self;</div><div class="line">        self.headerH = headerH;</div><div class="line">        self.header = header;</div><div class="line">        </div><div class="line">        self.tableview.contentInset = UIEdgeInsetsMake(self.headerH, 0, 0, 0);</div><div class="line">    &#125;</div><div class="line">    return self;</div><div class="line">&#125;</div><div class="line">-(void)scrollZoom&#123;</div><div class="line">    [self scrollViewDidScroll:self.tableview];</div><div class="line">&#125;</div><div class="line">-(void)scrollViewDidScroll:(UIScrollView *)scrollView&#123;</div><div class="line">    </div><div class="line">    CGFloat y = scrollView.contentOffset.y;</div><div class="line">    </div><div class="line">    if ( y  &lt; - self.headerH) &#123;</div><div class="line">        self.header.y  = y;</div><div class="line">        self.header.height = -y;</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">    </div><div class="line">&#125;</div><div class="line">@end</div></pre></td></tr></table></figure>
<p>####æ‰€ä»¥åªéœ€è¦ä¸¤æ­¥ï¼Œå³å¯ã€‚</p>
<p>1ã€ç¬¬ä¸€æ­¥ï¼šå¼•å…¥ï¼Œåˆå§‹åŒ–<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">self.zoom =  [[PullDownZoom alloc]initWithTableview:self.tableview headerH:300 header:self.header];</div></pre></td></tr></table></figure></p>
<p>2ã€ç¬¬äºŒæ­¥ï¼šåœ¨scrollviewæ»šåŠ¨çš„åœ°æ–¹è®¾ç½®<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">-(void)scrollViewDidScroll:(UIScrollView *)scrollView&#123;</div><div class="line"></div><div class="line">    [self.zoom scrollZoom];</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>demoåœ°å€ï¼š<a href="https://github.com/liuxinixn/pullDownStretch" target="_blank" rel="noopener">ä¸‹æ‹‰ä¸€ä½“</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="liuxinixn.github.io/2017/04/09/iOS-è‡ªå®šä¹‰å¼¹æ¡†/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="é›ªæ™Ÿ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://upload.jianshu.io/users/upload_avatars/1694376/4b7e25bd43ee.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é›ªæ™Ÿ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/09/iOS-è‡ªå®šä¹‰å¼¹æ¡†/" itemprop="url">iOS -è‡ªå®šä¹‰å¼¹æ¡†</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-04-09T20:19:35+08:00">
                2017-04-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>é¡¹ç›®ä¸­éœ€è¦è‡ªå®šä¹‰å¼¹æ¡†å°±æ’¸ä¸€ä¸ªå¼¹æ¡†ï¼Œ åšä¸ªè®°å½•ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1694376-90bfc2d9ab39af92.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ20170626-113554.png"></p>
<p>xib è‡ªå®šä¹‰ä¸€ä¸ªView,æ·»åŠ åœ¨keyWindowä¸Šå³å¯ï¼Œblockç»‘å®šç‚¹å‡»æŒ‰é’®ä¹‹åçš„å›è°ƒã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">#import &lt;UIKit/UIKit.h&gt;</div><div class="line"></div><div class="line">@interface LXAlertView : UIView</div><div class="line">-(instancetype)initWithTitle:(NSString *)title</div><div class="line">                leftBtnTitle:(NSString *)leftBtnTitle</div><div class="line">                 rightBtnTitle:(NSString *)rightBtnTitle</div><div class="line">                 alertResult:(void (^)(NSInteger index)) alertResult;</div><div class="line"></div><div class="line"></div><div class="line">-(void)showLXAlertView;</div><div class="line">@end</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div></pre></td><td class="code"><pre><div class="line">//</div><div class="line">//  LXAlertView.m</div><div class="line">//  LXAlertview</div><div class="line">//</div><div class="line">//  Created by zhongzhi on 2017/6/22.</div><div class="line">//  Copyright Â© 2017å¹´ zhongzhi. All rights reserved.</div><div class="line">//</div><div class="line"></div><div class="line">#import &quot;LXAlertView.h&quot;</div><div class="line">#import &quot;LXCustomAlert.h&quot;</div><div class="line">typedef void(^alertResult) (NSInteger index);</div><div class="line">@interface LXAlertView ()</div><div class="line">@property(nonatomic,strong)LXCustomAlert *customAlert;</div><div class="line">@property(nonatomic,copy)NSString *title;</div><div class="line">@property(nonatomic,copy)NSString *leftBtnTitle;</div><div class="line">@property(nonatomic,copy)NSString *rightBtnTitle;</div><div class="line">@property(nonatomic,copy)alertResult alertResult;</div><div class="line"></div><div class="line">@end</div><div class="line">@implementation LXAlertView</div><div class="line"></div><div class="line">-(instancetype)initWithTitle:(NSString *)title leftBtnTitle:(NSString *)leftBtnTitle rightBtnTitle:(NSString *)rightBtnTitle alertResult:(void (^)(NSInteger index)) alertResult;&#123;</div><div class="line">    </div><div class="line">    self = [super init];</div><div class="line">    if (self) &#123;</div><div class="line">        </div><div class="line">        self.frame = [UIScreen mainScreen].bounds;</div><div class="line">    </div><div class="line">        self.backgroundColor = [LBColor(98, 87, 56)colorWithAlphaComponent:0.9];</div><div class="line">        </div><div class="line">        </div><div class="line">        self.title = title;</div><div class="line">        </div><div class="line">        self.leftBtnTitle = leftBtnTitle;</div><div class="line">        </div><div class="line">        self.rightBtnTitle = rightBtnTitle;</div><div class="line">        </div><div class="line">        self.alertResult = alertResult;</div><div class="line">        </div><div class="line">        [self setup];</div><div class="line">    &#125;</div><div class="line">    return self;</div><div class="line">    </div><div class="line">&#125;</div><div class="line">-(void)showLXAlertView&#123;</div><div class="line">    </div><div class="line">    UIWindow *keyWindow = [UIApplication sharedApplication].keyWindow;</div><div class="line">    </div><div class="line">    [keyWindow addSubview:self];</div><div class="line">    </div><div class="line">    [self creatShowAnimation];</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(void)setup&#123;</div><div class="line">    </div><div class="line">    [self addSubview:self.customAlert];</div><div class="line">    </div><div class="line">    self.customAlert.title = self.title;</div><div class="line">    </div><div class="line">    self.customAlert.leftBtnTitle = self.leftBtnTitle;</div><div class="line">    </div><div class="line">    self.customAlert.rightBtnTitle = self.rightBtnTitle;</div><div class="line">    </div><div class="line">    self.customAlert.leftBtn.tag = 1;</div><div class="line">    </div><div class="line">    self.customAlert.rightBtn.tag = 2;</div><div class="line">    </div><div class="line">    [self.customAlert.leftBtn addTarget:self action:@selector(btnClick:) forControlEvents:UIControlEventTouchUpInside];</div><div class="line">    </div><div class="line">    [self.customAlert.rightBtn addTarget:self action:@selector(btnClick:) forControlEvents:UIControlEventTouchUpInside];</div><div class="line">    </div><div class="line">    </div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">-(void)btnClick:(UIButton *)button</div><div class="line">&#123;</div><div class="line">    </div><div class="line">    </div><div class="line">        </div><div class="line">    if (self.alertResult) &#123;</div><div class="line">            </div><div class="line">        </div><div class="line">        [self dismiss];</div><div class="line">                </div><div class="line">        </div><div class="line">        self.alertResult(button.tag);</div><div class="line"></div><div class="line"> </div><div class="line">    &#125;</div><div class="line">    [self removeFromSuperview];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)creatShowAnimation</div><div class="line">&#123;</div><div class="line">    </div><div class="line">    self.customAlert.transform = CGAffineTransformMakeScale(0.90, 0.90);</div><div class="line">    </div><div class="line">    [UIView animateWithDuration:0.25 delay:0 usingSpringWithDamping:0.8 initialSpringVelocity:1 options:UIViewAnimationOptionCurveLinear animations:^&#123;</div><div class="line">        </div><div class="line">        self.customAlert.transform = CGAffineTransformMakeScale(1.0, 1.0);</div><div class="line">        </div><div class="line">    &#125; completion:^(BOOL finished) &#123;</div><div class="line">        </div><div class="line">    &#125;];</div><div class="line">&#125;</div><div class="line">-(void)dismiss&#123;</div><div class="line">    self.customAlert.transform = CGAffineTransformMakeScale(1.0, 1.0);</div><div class="line">    </div><div class="line">    [UIView animateWithDuration:0.20 delay:0 usingSpringWithDamping:0.8 initialSpringVelocity:1 options:UIViewAnimationOptionCurveLinear animations:^&#123;</div><div class="line">        </div><div class="line">        self.customAlert.transform = CGAffineTransformMakeScale(0.0, 0.0);</div><div class="line">    &#125; completion:^(BOOL finished) &#123;</div><div class="line">        </div><div class="line">        [self removeFromSuperview];</div><div class="line">        </div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">&#125;</div><div class="line"></div><div class="line">-(LXCustomAlert *)customAlert&#123;</div><div class="line">    if (!_customAlert) &#123;</div><div class="line">        </div><div class="line">        _customAlert =[[NSBundle mainBundle]loadNibNamed:@&quot;LXCustomAlert&quot; owner:self options:nil].firstObject;</div><div class="line">        </div><div class="line">        _customAlert.frame = CGRectMake(Device_Width/2 -140, (Device_Height -64 - 145)/2, 280, 145);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    return _customAlert;</div><div class="line">&#125;</div><div class="line">@end</div></pre></td></tr></table></figure>
<p>demoåœ°å€ï¼š<a href="https://github.com/liuxinixn/LXAlertview" target="_blank" rel="noopener">LXAlertView</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="liuxinixn.github.io/2017/04/03/iOS-å¦‚ä½•æ”¹å˜UITextFiledçš„æ¸…é™¤æŒ‰é’®å›¾ç‰‡/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="é›ªæ™Ÿ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://upload.jianshu.io/users/upload_avatars/1694376/4b7e25bd43ee.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é›ªæ™Ÿ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/03/iOS-å¦‚ä½•æ”¹å˜UITextFiledçš„æ¸…é™¤æŒ‰é’®å›¾ç‰‡/" itemprop="url">iOS -å¦‚ä½•æ”¹å˜UITextFieldçš„æ¸…é™¤æŒ‰é’®æŒ‰é’®å›¾ç‰‡</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-04-03T20:19:35+08:00">
                2017-04-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <pre><code> textFild.clearButtonMode = UITextFieldViewModeWhileEditing;
UIButton *button =[textFild valueForKey:@&quot;_clearButton&quot;];
[button setImage:[UIImage imageNamed:@&quot;å‰å·&quot;] forState:UIControlStateNormal];
</code></pre><p><img src="http://upload-images.jianshu.io/upload_images/1694376-56b7cf50044d8fdc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ20170605-171045.png"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="liuxinixn.github.io/2017/04/01/iOS-åˆ©ç”¨YYWebImageåšä¸€ä¸ªåŠ è½½Gifçš„æ•ˆæœ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="é›ªæ™Ÿ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://upload.jianshu.io/users/upload_avatars/1694376/4b7e25bd43ee.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é›ªæ™Ÿ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/01/iOS-åˆ©ç”¨YYWebImageåšä¸€ä¸ªåŠ è½½Gifçš„æ•ˆæœ/" itemprop="url">iOS -åˆ©ç”¨YYWebImageåšä¸€ä¸ªåŠ è½½Gifçš„æ•ˆæœ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-04-01T20:19:35+08:00">
                2017-04-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>å…ˆä¸Šæ•ˆæœå›¾ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/1694376-b0af1b2fdd7d99f1.gif?imageMogr2/auto-orient/strip" alt="åŠ è½½Gif.gif"></p>
<p>demoä¸­çš„ä¸€äº›æ•ˆæœï¼š<br>1ã€ cellçš„ä¸€äº›åŠ¨ç”»<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">- (void)scrollViewDidScroll:(UIScrollView *)scrollView &#123;</div><div class="line">    CGFloat viewHeight = scrollView.height + scrollView.contentInset.top;</div><div class="line">    for (MyCell *cell in [self.tableView visibleCells]) &#123;</div><div class="line">        CGFloat y = cell.centerY - scrollView.contentOffset.y;</div><div class="line">        CGFloat p = y - viewHeight / 2;</div><div class="line">        CGFloat scale = cos(p / viewHeight * 0.8) * 0.95;</div><div class="line">        [UIView animateWithDuration:0.15 delay:0 options:UIViewAnimationOptionCurveEaseInOut | UIViewAnimationOptionAllowUserInteraction | UIViewAnimationOptionBeginFromCurrentState animations:^&#123;</div><div class="line">            cell.webImageView.transform = CGAffineTransformMakeScale(scale, scale);</div><div class="line">        &#125; completion:NULL];</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>2ã€åœ¨gif åŠ è½½å®Œæˆçš„æ—¶å€™æ·»åŠ ç‚¹å‡»tapã€panæ‰‹åŠ¿ï¼Œç‚¹å‡»åŠ¨ç”»ä»¥åŠå¹³ç§»æ‰‹åŠ¿å¯ä»¥è§‚çœ‹åŠ¨ç”»çš„æ¯ä¸€å¸§æ‰§è¡Œè¿‡ç¨‹ã€‚ä½¿ç”¨çš„æ˜¯å®˜ç½‘demoçš„ä¸€ä¸ªå·¥å…·ç±»ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[YYImageExampleHelper addTapControlToAnimatedImageView:self.webImageView];</div><div class="line"> [YYImageExampleHelper addPanControlToAnimatedImageView:self.webImageView];</div></pre></td></tr></table></figure></p>
<p>3ã€åœ¨å¾®ä¿¡èŠå¤©æˆ–è€…ä¸€äº›APPåŠ è½½Gifï¼ˆæ¯”å¦‚ç™¾æ€ä¸å¾—å§ï¼‰ä¸­ï¼Œæ‹–æ‹½è¿‡ç¨‹ä¸­ä¼šæš‚åœgifåŠ¨ç”»ï¼Œåœ¨åœæ­¢æ‹–åŠ¨çš„æ—¶å€™å¯ä»¥ç»§ç»­åŠ¨ç”»ã€‚æ°å¥½YYWebImageçš„ä¸€ä¸ªå­ç±»YYAnimatedImageViewæ°å¥½æä¾›äº†ä¸€ä¸ªè¿™æ ·çš„å®ç°ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">- (void)stopAnimating &#123;</div><div class="line">    [super stopAnimating];</div><div class="line">    [_requestQueue cancelAllOperations];</div><div class="line">    _link.paused = YES;</div><div class="line">    self.currentIsPlayingAnimation = NO;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)startAnimating &#123;</div><div class="line">    YYAnimatedImageType type = [self currentImageType];</div><div class="line">    if (type == YYAnimatedImageTypeImages || type == YYAnimatedImageTypeHighlightedImages) &#123;</div><div class="line">        NSArray *images = [self imageForType:type];</div><div class="line">        if (images.count &gt; 0) &#123;</div><div class="line">            [super startAnimating];</div><div class="line">            self.currentIsPlayingAnimation = YES;</div><div class="line">        &#125;</div><div class="line">    &#125; else &#123;</div><div class="line">        if (_curAnimatedImage &amp;&amp; _link.paused) &#123;</div><div class="line">            _curLoop = 0;</div><div class="line">            _loopEnd = NO;</div><div class="line">            _link.paused = NO;</div><div class="line">            self.currentIsPlayingAnimation = YES;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>æˆ‘æœ‰ä¸€å¥ç‰›æ‰¹ä¸çŸ¥å½“è®²ä¸å½“è®²ï¼Œè¿™ä¸ªåº“ç®€ç›´å¥½ç”¨çš„ä¸è¡Œã€‚ï¼ˆè¯·è‡ªè¡Œç•¥è¿‡â€¦.ï¼‰</p>
<p>å¥½äº†æ¥ä¸‹æ¥ é™„ä¸Šä»£ç ï¼š</p>
<p>å…¶å®æœ€ä¸»è¦çš„æ˜¯æ˜¯åˆ©ç”¨ä¸‹é¢æ¥å£åšæ–‡ç« ï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">- (void)yy_setImageWithURL:(NSURL *)imageURL</div><div class="line">               placeholder:(UIImage *)placeholder</div><div class="line">                   options:(YYWebImageOptions)options</div><div class="line">                  progress:(YYWebImageProgressBlock)progress</div><div class="line">                 transform:(YYWebImageTransformBlock)transform</div><div class="line">                completion:(YYWebImageCompletionBlock)completion &#123;</div><div class="line">    [self yy_setImageWithURL:imageURL</div><div class="line">                 placeholder:placeholder</div><div class="line">                     options:options</div><div class="line">                     manager:nil</div><div class="line">                    progress:progress</div><div class="line">                   transform:transform</div><div class="line">                  completion:completion];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>æ¥å£ä¸­æœ‰è‡ªå¸¦çš„ä¸€äº›è¿‡åº¦åŠ¨ç”»ï¼Œè‡ªå·±å¯ä»¥åˆ©ç”¨è¿”å›çš„åŠ è½½è¿›åº¦åšä¸€äº›åŠ è½½åŠ¨ç”»ã€‚å› ä¸ºä¹‹å‰å†™è¿‡ä¸€ä¸ªåœ†å½¢åŠ è½½åŠ¨ç”»å°±ç›´æ¥ç”¨äº†ã€‚å¦‚ä¸‹</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1694376-66a0d5123a0b04f7.gif?imageMogr2/auto-orient/strip" alt="è¿›åº¦.gif"></p>
<p>æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯å…ˆå±•ç¤ºè¿™ä¸ªå ä½å›¾ï¼ŒåŒæ­¥åŠ è½½è¿›åº¦ï¼ŒåŠ è½½å®Œæˆåéšè—å³å¯ã€‚</p>
<p>å ä½å›¾åœ¨å¼±ç½‘ æƒ…å†µä¸‹å¾ˆæ˜æ˜¾ï¼Œç½‘é€Ÿå¤ªå¥½ä¸å®¹æ˜“çœ‹å¾—å¤„ç†ã€‚<br>è¡¥å……ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œå¦‚ä½•åœ¨Macä¸Šæ¨¡æ‹Ÿå¼±ç½‘ç¯å¢ƒï¼Œé™åˆ¶ç½‘é€Ÿã€‚<br>è‹¹æœå®˜æ–¹æä¾›äº†é™åˆ¶ç³»ç»Ÿæ•´ä½“ç½‘é€Ÿçš„æ’ä»¶ï¼Œç•Œé¢å¦‚ä¸‹ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1694376-e947df5a01425ff0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="v2-b7a353158e82797b067578c21a811660_b.png"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1694376-da290fa8c3d2440c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="v2-18459c845d5ea4479ea4eca0724af903_r.png"></p>
<p>ä¸‹è½½åœ°å€ï¼š<a href="https://link.zhihu.com/?target=https%3A//developer.apple.com/download/more/" target="_blank" rel="noopener">Sign in with your Apple ID**</a>ï¼Œç™»å½•åæœç´¢ <code>Additional Tools for Xcode æˆ– Hardware IO Tools for Xcode</code>ï¼ˆä¸éœ€è¦å®‰è£…Xcodeåº”è¯¥ä¹Ÿå¯ä»¥è¿è¡Œï¼‰ï¼Œä¸‹è½½å®Œæˆåä»é‡Œé¢æ‰¾åˆ°<code>Network Link Conditioner</code>ï¼ŒåŒå‡»å®‰è£…å³å¯ã€‚</p>
<p>ä»¥ä¸Š<code>Gif</code>é“¾æ¥å‡æ¥è‡ª<code>YYWebImage</code>çš„äº‹ä¾‹<code>demo</code>ã€‚</p>
<p>æœ€åé™„ä¸Šdemoåœ°å€ :<a href="https://github.com/liuxinixn/LoadGif" target="_blank" rel="noopener">å¼‚æ­¥åŠ è½½Gifçš„å‡ ä¸ªæ•ˆæœ</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="liuxinixn.github.io/2017/03/28/ä»¿ç½‘æ˜“æ–°é—»Navbar/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="é›ªæ™Ÿ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://upload.jianshu.io/users/upload_avatars/1694376/4b7e25bd43ee.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é›ªæ™Ÿ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/03/28/ä»¿ç½‘æ˜“æ–°é—»Navbar/" itemprop="url">ä»¿ç½‘æ˜“æ–°é—»Navbar</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-03-28T20:19:35+08:00">
                2017-03-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æ•ˆæœå›¾ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/1694376-23621ebabfdce552.gif?imageMogr2/auto-orient/strip" alt="ç½‘æ˜“å¯¼èˆªæ¡.gif"></p>
<p>åœ¨é¡¹ç›®ä¸­æœ‰ç±»ä¼¼çš„éœ€æ±‚ï¼Œä»¿ç½‘æ˜“æ–°é—»Navbarä¸»è¦å€ŸåŠ©UIScrollviewä¸ addChildViewController å®ç°è¿™ä¸ªæ•ˆæœã€‚<br>åœ¨æ»šåŠ¨æ—¶å€™æœ‰å¯èƒ½ä¼šæœ‰ä¸¤ä¸ªéœ€æ±‚</p>
<ul>
<li>ç‚¹å‡»item æ»šåŠ¨åˆ°ä¸­é—´</li>
<li>åœ¨è¶…å‡ºå±å¹•æ—¶ç‚¹å‡»æ‰å‘ç”Ÿæ»šåŠ¨</li>
</ul>
<p>æ‰€ä»¥åœ¨è‡ªå®šä¹‰SegmentControlçš„æ—¶å€™ å®šä¹‰ä¸€ä¸ªæšä¸¾ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">typedef enum : NSUInteger &#123;</div><div class="line">    LXSegmentedControlTypeCenterScroll, // ä¸­å¿ƒæ»šåŠ¨é£æ ¼</div><div class="line">    LXSegmentedControlTypeEndScroll, // è¶…å‡ºå±å¹•æ»šåŠ¨é£æ ¼</div><div class="line">&#125; LXSegmentedControlScrollType;  // é»˜è®¤ä¸ºæ»šåŠ¨é£æ ¼</div></pre></td></tr></table></figure></p>
<blockquote>
<p>ç¬¬ä¸€æ­¥ å®šä¹‰ä¸€ä¸ªLXSegmentControl ç»§æ‰¿äºUIScrollviewã€‚æ¥å£ä¸­æš´éœ²ä»¥ä¸‹å±æ€§ï¼Œæœ‰ç±»æ–¹æ³•æ„é€ ä»¥åŠå¯¹è±¡æ–¹æ³•æ„é€ ï¼Œæ»šåŠ¨ç±»å‹é€‰æ‹©ï¼Œæ¥å£æ–¹æ³•ä¸­å·²ç»ä¼ å…¥ä»£ç†UIViewControllerã€‚</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">@protocol LXSegmentControlDelegate&lt;NSObject&gt;</div><div class="line">-(void)LXSegmentControl:(LXSegmentControl *)segmentControl didSelectBtnAtIndex:(NSInteger)index;</div><div class="line">@end;</div><div class="line">@interface LXSegmentControl : UIScrollView</div><div class="line">//å¯¹è±¡æ–¹æ³•åˆ›å»º LXSegmentControl</div><div class="line">-(instancetype)initWithFrame:(CGRect)frame delegate:(id &lt;LXSegmentControlDelegate&gt;)delegate titleArr:(NSArray *)titleArr;</div><div class="line">//ç±»æ–¹æ³•åˆ›å»º LXSegmentControl</div><div class="line">+(instancetype)segmentControlWithFrame:(CGRect)frame delegate:(id &lt;LXSegmentControlDelegate&gt;)delegate titleArr:(NSArray *)titleArr;</div><div class="line"></div><div class="line">@property(nonatomic,weak)id &lt;LXSegmentControlDelegate&gt; SeDelegate;</div><div class="line"></div><div class="line">@property(nonatomic,assign)LXSegmentedControlScrollType scrollType;</div><div class="line"></div><div class="line">///** æ»šåŠ¨Conrolllerçš„æ—¶å€™ SegmentControléœ€è¦åšçš„å¤„ç† */</div><div class="line">- (void)titleBtnSelectedWithScrollView:(UIScrollView *)scrollView;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<blockquote>
<p>ç¬¬äºŒéƒ¨ æ ¹æ®ä¼ å…¥çš„title æ•°ç»„åˆ›å»ºbutton ç„¶åè®¾ç½®UIScrollviewçš„å†…å®¹å¤§å°ã€‚buttonçš„å¤§å°é€šè¿‡APIè®¡ç®—å‡ºå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œç„¶åè®¾ç½®marginã€‚</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">for (NSUInteger i  = 0; i &lt;_title_Arr.count; i++) &#123;</div><div class="line">        </div><div class="line">        self.title_btn =[UIButton buttonWithType:UIButtonTypeCustom];</div><div class="line">        _title_btn.titleLabel.font = LXFont(btn_fondOfSize);</div><div class="line">        _title_btn.tag = i;</div><div class="line">        </div><div class="line">        //è®¡ç®—å†…å®¹çš„size</div><div class="line">        CGSize buttonSize =[self sizeWithText:_title_Arr[i] font:LXFont(btn_fondOfSize) maxSize:CGSizeMake(MAXFLOAT, button_H)];</div><div class="line">        //è®¡ç®—å†…å®¹çš„å®½åº¦</div><div class="line">        CGFloat button_W = 2 *btn_Margin + buttonSize.width;</div><div class="line">        _title_btn.frame = CGRectMake(button_X, button_Y, button_W, button_H);</div><div class="line">        [_title_btn setTitle:_title_Arr[i] forState:UIControlStateNormal];</div><div class="line">        [_title_btn setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];</div><div class="line">        [_title_btn setTitleColor:[UIColor redColor] forState:UIControlStateSelected];</div><div class="line">        </div><div class="line">        //è®¡ç®—æ¯ä¸ªbuttonçš„ X å€¼</div><div class="line">        button_X = button_X + button_W;</div><div class="line">        //ç‚¹å‡»äº‹ä»¶</div><div class="line">        [_title_btn addTarget:self action:@selector(buttonAction:) forControlEvents:UIControlEventTouchUpInside];</div><div class="line">        </div><div class="line">        //é»˜è®¤é€‰ä¸­ç¬¬0 ä¸ªbutton</div><div class="line">        if (i == 0) &#123;</div><div class="line">            [self buttonAction:_title_btn];</div><div class="line">        &#125;</div><div class="line">        //å­˜å…¥æ‰€æœ‰çš„ title_btn</div><div class="line">        [self.titleBtn_mArr addObject:_title_btn];</div><div class="line">        [self addSubview:_title_btn];</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    //è®¡ç®— scrollview çš„å®½åº¦</div><div class="line">    </div><div class="line">    UIButton *lastButton = self.titleBtn_mArr.lastObject;</div><div class="line">    CGFloat scrollViewWidth = CGRectGetMaxX(lastButton.frame);</div><div class="line">    self.contentSize = CGSizeMake(scrollViewWidth, self.height);</div></pre></td></tr></table></figure>
<blockquote>
<p>æœ€å…³é”®çš„å¤„ç†åœ¨äº å¤„ç†button çš„ç‚¹å‡»æ–¹æ³• åœ¨ç‚¹å‡»æ—¶å€™å¤„ç†contentoffsetï¼Œæ˜¯åœ¨ç‚¹å‡»å±å¹•æœ€åä¸€ä¸ªæŒ‰é’®ç„¶åæ»šåŠ¨UIScrollviewï¼Œè¿˜æ˜¯é€‰æ‹©å±…ä¸­æ¨¡å¼ã€‚</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">#pragma mark - - - æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶</div><div class="line">- (void)buttonAction:(UIButton *)sender</div><div class="line">&#123;</div><div class="line">    [self titleBtnSelectededCenter:sender];</div><div class="line">    </div><div class="line">    // 2ã€ä»£ç†æ–¹æ³•å®ç°</div><div class="line">    NSInteger index = sender.tag;</div><div class="line">    </div><div class="line">    if ([self.SeDelegate respondsToSelector:@selector(LXSegmentControl:didSelectBtnAtIndex:)]) &#123;</div><div class="line">        </div><div class="line">        [self.SeDelegate LXSegmentControl:self didSelectBtnAtIndex:index];</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    //3 ã€ æ”¹å˜æŒ‡ç¤ºå™¨çš„ä½ç½®</div><div class="line">    [self titleBtnSelected:sender];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">/** æ»šåŠ¨æ ‡é¢˜é€‰ä¸­å±…ä¸­ */</div><div class="line">- (void)titleBtnSelectededCenter:(UIButton *)centerBtn &#123;</div><div class="line">  </div><div class="line">    </div><div class="line">    switch (self.scrollType) &#123;</div><div class="line">        case LXSegmentedControlTypeCenterScroll:</div><div class="line">            </div><div class="line">            [self centerScroll:centerBtn];</div><div class="line">            </div><div class="line">            break;</div><div class="line">        case LXSegmentedControlTypeEndScroll:</div><div class="line">            </div><div class="line">            [self endScroll:centerBtn];</div><div class="line">            </div><div class="line">        default:</div><div class="line">            break;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">-(void)centerScroll:(UIButton *)centerBtn</div><div class="line">&#123;</div><div class="line">     //è®¡ç®—åç§»é‡</div><div class="line">        CGFloat offsetX = centerBtn.center.x - Device_Width * 0.5;</div><div class="line">    </div><div class="line">        if (offsetX &lt; 0) offsetX = 0;</div><div class="line">    </div><div class="line">        // è·å–æœ€å¤§æ»šåŠ¨èŒƒå›´</div><div class="line">        CGFloat maxOffsetX = self.contentSize.width - Device_Width;</div><div class="line">    </div><div class="line">        if (offsetX &gt; maxOffsetX) offsetX = maxOffsetX;</div><div class="line">    </div><div class="line">        // æ»šåŠ¨æ ‡é¢˜æ»šåŠ¨æ¡</div><div class="line">        [self setContentOffset:CGPointMake(offsetX, 0) animated:YES];</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(void)endScroll:(UIButton *)centerBtn</div><div class="line">&#123;</div><div class="line">    CGFloat offsetX;</div><div class="line">    </div><div class="line">    if (CGRectGetMaxX(centerBtn.frame) &gt;= Device_Width) &#123;</div><div class="line">        </div><div class="line">        offsetX = CGRectGetMaxX(centerBtn.frame) - Device_Width;</div><div class="line">        </div><div class="line">        if (centerBtn.tag &lt;[_title_Arr count]-1) &#123;</div><div class="line">            offsetX = offsetX + centerBtn.frame.size.width;</div><div class="line">        &#125;</div><div class="line">    &#125;else</div><div class="line">    &#123;</div><div class="line">        offsetX = 0 ;</div><div class="line">    &#125;</div><div class="line">    [self setContentOffset:CGPointMake(offsetX, 0) animated:YES];</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>æ¥å£ä¸­éœ€è¦æš´éœ² ä¸€ä¸ªæ–¹æ³•å½“æˆ‘ä»¬æ»šåŠ¨å­æ§åˆ¶å™¨çš„æ—¶å€™item éœ€è¦ä½œå‡ºçš„æ”¹å˜</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">/** æ ‡é¢˜é€‰ä¸­é¢œè‰²æ”¹å˜ä»¥åŠæŒ‡ç¤ºå™¨ä½ç½®å˜åŒ– */</div><div class="line">- (void)titleBtnSelectedWithScrollView:(UIScrollView *)scrollView &#123;</div><div class="line">    // 1ã€è®¡ç®—æ»šåŠ¨åˆ°å“ªä¸€é¡µ</div><div class="line">    NSInteger index = scrollView.contentOffset.x / scrollView.frame.size.width;</div><div class="line">    </div><div class="line">    // 2ã€æŠŠå¯¹åº”çš„æ ‡é¢˜é€‰ä¸­</div><div class="line">    UIButton *selectedBtn = self.titleBtn_mArr[index];</div><div class="line">    </div><div class="line">    // 3ã€æ»šåŠ¨æ—¶ï¼Œæ”¹å˜æ ‡é¢˜é€‰ä¸­</div><div class="line">    [self titleBtnSelected:selectedBtn];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>æ¥ä¸‹æ¥æ˜¯ViewControllä¸­çš„å¤„ç†</p>
</blockquote>
<p>å®ç°LXSegmentControlçš„ä»£ç†<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">-(void)LXSegmentControl:(LXSegmentControl *)segmentControl didSelectBtnAtIndex:(NSInteger)index</div><div class="line">&#123;</div><div class="line">    // 1 è®¡ç®—æ»šåŠ¨çš„ä½ç½®</div><div class="line">    CGFloat offsetX = index * self.view.frame.size.width;</div><div class="line">    self.mainScrollView.contentOffset = CGPointMake(offsetX, 0);</div><div class="line">    </div><div class="line">    // 2.ç»™å¯¹åº”ä½ç½®æ·»åŠ å¯¹åº”å­æ§åˆ¶å™¨</div><div class="line">    [self showVc:index];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>######å½“æˆ‘ä»¬åœ¨æ·»åŠ å­è§†å›¾çš„viewçš„æ—¶å€™åˆ¤æ–­æ˜¯ä¸æ˜¯è¯¥æ§åˆ¶å™¨çš„è§†å›¾å·²ç»è¿›è¡Œäº†æ‡’åŠ è½½<br><code>vc.isViewLoaded</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">// æ˜¾ç¤ºæ§åˆ¶å™¨çš„view</div><div class="line">- (void)showVc:(NSInteger)index &#123;</div><div class="line">    </div><div class="line">    CGFloat offsetX = index * self.view.frame.size.width;</div><div class="line">    </div><div class="line">    UIViewController *vc = self.childViewControllers[index];</div><div class="line">    </div><div class="line">    // åˆ¤æ–­æ§åˆ¶å™¨çš„viewæœ‰æ²¡æœ‰åŠ è½½è¿‡,å¦‚æœå·²ç»åŠ è½½è¿‡,å°±ä¸éœ€è¦åŠ è½½</div><div class="line">    if (vc.isViewLoaded) return;</div><div class="line">    vc.view.backgroundColor =  LBRandomColor;</div><div class="line">    [self.mainScrollView addSubview:vc.view];</div><div class="line">    vc.view.frame = CGRectMake(offsetX, 0, self.view.frame.size.width, self.view.frame.size.height);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>æœ€å å¤„ç†åœ¨æ»‘åŠ¨åˆ‡æ¢å­æ§åˆ¶å™¨çš„æ—¶å€™éœ€è¦LXSegmentControléœ€è¦åšçš„å¤„ç†</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">#pragma mark - UIScrollViewDelegate</div><div class="line">- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView&#123;</div><div class="line">    </div><div class="line">    // è®¡ç®—æ»šåŠ¨åˆ°å“ªä¸€é¡µ</div><div class="line">    NSInteger index = scrollView.contentOffset.x / scrollView.frame.size.width;</div><div class="line">    </div><div class="line">    // 1.æ·»åŠ å­æ§åˆ¶å™¨view</div><div class="line">    [self showVc:index];</div><div class="line">    </div><div class="line">    // 2.æŠŠå¯¹åº”çš„æ ‡é¢˜é€‰ä¸­ æ¥å£ä¸­å·²ç»æš´éœ²</div><div class="line">    [self.segmentControl titleBtnSelectedWithScrollView:scrollView];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>demoåœ°å€ <a href="https://github.com/liuxinixn/CoarseImitationNetEase/tree/master" target="_blank" rel="noopener">ä¸¤ç§Navbaræ»šåŠ¨ç±»å‹</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="liuxinixn.github.io/2017/03/20/iOS-è®¾è®¡æ¨¡å¼ä¹‹MVVM/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="é›ªæ™Ÿ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://upload.jianshu.io/users/upload_avatars/1694376/4b7e25bd43ee.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é›ªæ™Ÿ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/03/20/iOS-è®¾è®¡æ¨¡å¼ä¹‹MVVM/" itemprop="url">iOS -è®¾è®¡æ¨¡å¼ä¹‹MVVM</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-03-20T20:19:35+08:00">
                2017-03-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>å…ˆå€Ÿé‰´ä¸€ä¸ªdemoï¼Œçœ‹å®Œdemoï¼ŒåŸºæœ¬ä¸Šå°±å¤§æ¦‚ç†è§£æ˜¯ä»€ä¹ˆæ„æ€äº†ï¼Œdemoåœ°å€ï¼š<a href="https://github.com/coderyi/MVVMDemo" target="_blank" rel="noopener">MVVMDemo</a></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1694376-0f5161eafe8e121d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="View Model.png"></p>
<p>åªæ˜¯ä¸ªäººçš„ä¸€ç‚¹ç†è§£ã€‚<br>å…¶å®è¯´æ˜ç™½äº†ï¼ŒMVVMçš„è®¾è®¡æ¨¡å¼ä¹Ÿåªæ˜¯åœ¨MVCæ¨¡å¼ä¸Šçš„æ›´è¿›ä¸€æ­¥çš„å°è£…ï¼Œè§£è€¦ï¼Œå¢åŠ äº†ä»£ç é‡ï¼Œä½†æ˜¯æ–¹ä¾¿äº†æµ‹è¯•ï¼Œåˆ†å±‚æ›´åŠ ç»†è‡´ï¼Œæ¨¡å—æ›´åŠ å…·ä½“ã€‚å¥½çš„ä»£ç åº”è¯¥æ˜¯æ˜“äºè¯»å–ï¼Œæ–¹ä¾¿æµ‹è¯•ï¼Œå°½é‡è§£è€¦ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1694376-0d335ec25d4d5a13.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±‚çº§.png"></p>
<p>å¯ä»¥çœ‹åˆ°ä¸Šå›¾çš„å±‚çº§ï¼Œå…¶å®tableViewçš„ä»£ç†ä¹Ÿå¯ä»¥ä½œä¸ºViewModelï¼Œå› ä¸ºéƒ½æ˜¯æˆ‘ä»¬æŠ½å‡ºæ¥çš„å’ŒViewè¿›è¡Œäº¤äº’ã€‚Controllerä¸­ï¼Œå°±å‰©ä¸‹ä¸€äº›ç®€å•çš„äº¤äº’ã€‚</p>
<p>æŠ½å–çš„æ€è·¯ï¼šå…³äºç½‘ç»œè¯·æ±‚æˆ‘ä»¬éœ€è¦å¯¹æ•°æ®è¿›è¡Œå¤„ç†ï¼Œå¯ä»¥æ”¾åœ¨ViewModelé‡Œï¼Œå¯¹äºUITabelViewçš„æŠ½å–ï¼Œé‡è¦çš„å°±æ˜¯ä¸¤ä¸ªä»£ç†æ–¹æ³•çš„æŠ½å–ï¼Œä½¿ç”¨ç»§æ‰¿ä¸NSObjectçš„ä¸¤ä¸ªmodelï¼Œ åˆ†åˆ«ç»§æ‰¿ä¸<uitableviewdatasource><uitableviewdelegate>è¿™ä¸¤ä¸ªä»£ç†ï¼Œå³å¯å®ŒæˆæŠ½å–ã€‚View ä¸ Modelçš„æŠ½å–å°±ä¸ç”¨è¯´æ˜äº†ã€‚</uitableviewdelegate></uitableviewdatasource></p>
<p>######å› ä¸ºæˆ‘ä»¬æŠ½å–äº†ç»§æ‰¿ä¸<uitableviewdelegate>çš„modelï¼Œåœ¨ç•Œé¢è·³è½¬çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®çŸ¥é“å½“å‰çš„æ§åˆ¶å™¨ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é¢å¤–æä¾›ä¸€ä¸ªæ¥å£ï¼š<code>@property(nonatomic,weak)LXTableViewController *controller;</code>,æ¥å£çš„å±æ€§å£°æ˜ä¸ºweakï¼Œé˜²æ­¢å¾ªç¯å¼•ç”¨ï¼Œå› ä¸ºåœ¨Controllerå·²ç»æ‹¥æœ‰äº†è¯¥modelã€‚<br>è¿”å›çš„æ—¶å€™å¯ä»¥çœ‹åˆ°è¯¥æ§åˆ¶å™¨å·²ç»é‡Šæ”¾ã€‚<br>ä»£ç å¦‚ä¸‹:</uitableviewdelegate></p>
<p>######Controller: ï¼ˆå¯ä»¥çœ‹åˆ°Controller é‡Œçš„ä»£ç æ›´åŠ ç²¾ç®€ï¼‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line">@interface LXTableViewController ()</div><div class="line">&#123;</div><div class="line">    </div><div class="line">    MJRefreshNormalHeader *refreshHeader;</div><div class="line">    MJRefreshAutoNormalFooter *refreshFooter;</div><div class="line">    NSMutableArray *totalSource;</div><div class="line">    LBViewModel *tableViewModel;</div><div class="line">    UITableView *tableView;</div><div class="line">    LBTableViewDataSource *tableViewDataSource;</div><div class="line">    LBTableViewDelegate *tableViewDelegate;</div><div class="line">&#125;</div><div class="line">/** ç”¨æ¥æ˜¾ç¤ºçš„å‡æ•°æ® */</div><div class="line">@end</div><div class="line"></div><div class="line">@implementation LXTableViewController</div><div class="line">-(void)dealloc&#123;</div><div class="line">    NSLog(@&quot;%s&quot;,__func__ );</div><div class="line">&#125;</div><div class="line">- (void)viewDidLoad &#123;</div><div class="line">    [super viewDidLoad];</div><div class="line">    self.view.backgroundColor=[UIColor whiteColor];</div><div class="line">    </div><div class="line">    tableView=[[UITableView alloc] initWithFrame:CGRectMake(0, 0, Device_Width, Device_Height-64) style:UITableViewStylePlain];</div><div class="line">    tableView.tableFooterView =[UIView new];</div><div class="line">    [self.view addSubview:tableView];</div><div class="line">    tableViewDataSource=[[LBTableViewDataSource alloc] init];</div><div class="line">    tableViewDelegate=[[LBTableViewDelegate alloc] init];</div><div class="line">    tableView.dataSource=tableViewDataSource;</div><div class="line">    tableView.delegate=tableViewDelegate;</div><div class="line">    </div><div class="line">    tableViewDelegate.controller = self;</div><div class="line">    tableViewModel=[[LBViewModel alloc] init];</div><div class="line">    totalSource=0;</div><div class="line">    </div><div class="line">    __weak typeof(self) weakSelf = self;</div><div class="line"></div><div class="line">    // è®¾ç½®å›è°ƒï¼ˆä¸€æ—¦è¿›å…¥åˆ·æ–°çŠ¶æ€å°±ä¼šè°ƒç”¨è¿™ä¸ªrefreshingBlockï¼‰</div><div class="line">    self.tableView.mj_header = [MJRefreshNormalHeader headerWithRefreshingBlock:^&#123;</div><div class="line">        __strong typeof(self) strongSelf = weakSelf;</div><div class="line"></div><div class="line">        [strongSelf loadNewData];</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    // é©¬ä¸Šè¿›å…¥åˆ·æ–°çŠ¶æ€</div><div class="line">    [self.tableView.mj_header beginRefreshing];</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">-(void)loadNewData&#123;</div><div class="line">    </div><div class="line">    [tableViewModel headerRefreshRequestWithCallback:^(NSArray *array)&#123;</div><div class="line">        totalSource=(NSMutableArray *)array;</div><div class="line">        tableViewDataSource.array=totalSource;</div><div class="line">        tableViewDelegate.array=totalSource;</div><div class="line">        [self.tableView.mj_header endRefreshing];</div><div class="line">        [tableView reloadData];</div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>#####Model<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">#import &lt;Foundation/Foundation.h&gt;</div><div class="line"></div><div class="line">@interface FeedbackModel : NSObject</div><div class="line">@property(nonatomic,strong)NSString *content;</div><div class="line">@property(nonatomic,strong)NSString *answerTime;</div><div class="line">@property(nonatomic,strong)NSString *answer;</div><div class="line"></div><div class="line">@property(nonatomic,strong)NSString *createTime;</div><div class="line">@property(nonatomic,strong)NSString *status;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure></p>
<p>######View (ä½¿ç”¨çš„è¿˜æ˜¯åŸdemoçš„)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">@interface CustomTableViewCell : UITableViewCell</div><div class="line">@property(nonatomic,strong) UILabel *titleLabel;</div><div class="line">@end</div><div class="line"></div><div class="line">#import &quot;CustomTableViewCell.h&quot;</div><div class="line"></div><div class="line">@implementation CustomTableViewCell</div><div class="line"></div><div class="line">- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier</div><div class="line">&#123;</div><div class="line">    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];</div><div class="line">    if (self) &#123;</div><div class="line">        self.backgroundColor = LBRandomColor;</div><div class="line">        // Initialization code</div><div class="line">        _titleLabel=[[UILabel alloc] initWithFrame:CGRectMake(0, 0, Device_Width, 50)];</div><div class="line">        [self.contentView addSubview:_titleLabel];</div><div class="line">        _titleLabel.backgroundColor=[UIColor whiteColor];</div><div class="line">        _titleLabel.font=[UIFont systemFontOfSize:14];</div><div class="line">       </div><div class="line">    &#125;</div><div class="line">    return self;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure></p>
<p>######TableViewprotocolçš„å°è£…<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">@interface LBTableViewDataSource : NSObject&lt;UITableViewDataSource&gt;</div><div class="line">@property (nonatomic,strong) NSArray *array;</div><div class="line">@end</div><div class="line"></div><div class="line">@implementation LBTableViewDataSource</div><div class="line">-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section&#123;</div><div class="line">    return self.array.count;</div><div class="line">&#125;</div><div class="line">-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath&#123;</div><div class="line">    CustomTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@&quot;Cell&quot;];</div><div class="line">    if (cell == nil) &#123;</div><div class="line">        cell = [[CustomTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@&quot;Cell&quot;];</div><div class="line">    &#125;</div><div class="line">    NSString *content=((FeedbackModel *)[_array objectAtIndex:indexPath.row]).content;</div><div class="line">   NSString *newContent =  [NSString stringWithFormat:@&quot;%@ %@&quot;,@&quot;Q :&quot;,[LBService stringFromUnicode:content]];</div><div class="line">    cell.textLabel.text = newContent;</div><div class="line">    return cell;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">-------------------------------------------------------------------------------------------</div><div class="line">#import &lt;Foundation/Foundation.h&gt;</div><div class="line">@class LXTableViewController;</div><div class="line">@interface LBTableViewDelegate : NSObject&lt;UITableViewDelegate&gt;</div><div class="line">@property (nonatomic,strong) NSArray *array;</div><div class="line">@property(nonatomic,weak)LXTableViewController *controller;</div><div class="line">@end</div><div class="line">@implementation LBTableViewDelegate</div><div class="line">- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath</div><div class="line">&#123;</div><div class="line">    if (_array.count&gt;0) &#123;</div><div class="line"></div><div class="line">        [self.controller.navigationController pushViewController:[[LBNextViewController alloc]init] animated:YES];</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath&#123;</div><div class="line">    return 50.0;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>#####ViewModel (ä¸»è¦å°è£…äº†è·å–æ•°æ®æºï¼Œæœ€å¥½æœ‰å›è°ƒblock)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">typedef void(^callback)(NSArray *array);</div><div class="line">@interface LBViewModel : NSObject</div><div class="line"></div><div class="line">-(void)headerRefreshRequestWithCallback:(callback)callback;</div><div class="line">@end</div><div class="line"></div><div class="line">@implementation LBViewModel</div><div class="line">- (instancetype)init</div><div class="line">&#123;</div><div class="line">    self = [super init];</div><div class="line">    if (self) &#123;</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">    return self;</div><div class="line">&#125;</div><div class="line">-(void)headerRefreshRequestWithCallback:(callback)callback&#123;</div><div class="line">    NSString *url = @&quot;https://139.129.165.192:8443/lbjy-project/findInfoFeedback.action?userId=33A971DAE942BEB3E050190AE10D552C&quot;;</div><div class="line">    [LBHTTPTool get:url params:nil success:^(id responseObject) &#123;</div><div class="line">        </div><div class="line">//        NSLog(@&quot;%@&quot;,responseObject);</div><div class="line">        NSMutableArray *arr=[NSMutableArray array];</div><div class="line"></div><div class="line">        NSMutableArray *responseArray =[FeedbackModel mj_keyValuesArrayWithObjectArray:responseObject[@&quot;FeedbackList&quot;]];</div><div class="line">        for (NSDictionary *paramDic in responseArray) &#123;</div><div class="line">            FeedbackModel *model =[FeedbackModel mj_objectWithKeyValues:paramDic];</div><div class="line">            [arr addObject:model];</div><div class="line">        &#125;</div><div class="line">        callback(arr);</div><div class="line">    &#125; failure:^(NSError *error) &#123;</div><div class="line">        </div><div class="line">        </div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1694376-d887bb3179b3d535.gif?imageMogr2/auto-orient/strip" alt="show.gif"></p>
<blockquote>
<p>ä»¥ä¸Šåªæ˜¯ä¸ªäººä¸€ç‚¹ç†è§£ã€‚</p>
</blockquote>
<p>demo åœ°å€ï¼š <a href="https://github.com/liuxinixn/LXMVVMExample" target="_blank" rel="noopener">MVVMDemo</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          
            <img class="site-author-image" itemprop="image"
              src="http://upload.jianshu.io/users/upload_avatars/1694376/4b7e25bd43ee.jpg"
              alt="é›ªæ™Ÿ" />
          
            <p class="site-author-name" itemprop="name">é›ªæ™Ÿ</p>
            <p class="site-description motion-element" itemprop="description">å¤šå»å°è¯•ä½ ä»æœªå°è¯•çš„ã€‚</p>
        </div>

        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
            
              <a href="/archives/">
            
                <span class="site-state-item-count">97</span>
                <span class="site-state-item-name">æ—¥å¿—</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/liuxinixn" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>GitHub</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.jianshu.com/u/3d7c50f31b88" target="_blank" title="Jianshu">
                  
                    <i class="fa fa-fw fa-flag"></i>Jianshu</a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">é›ªæ™Ÿ</span>

  
</div>

<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  æœ¬ç«™è®¿å®¢æ•°:<span id="busuanzi_value_site_uv"></span>
</span>
</div>

  <div class="powered-by">ç”± <a class="theme-link" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.2</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  









  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/three/three.min.js"></script>

  
  <script type="text/javascript" src="/lib/three/three-waves.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>


  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
